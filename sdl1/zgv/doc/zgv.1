.\" *** Auto-generated by makeman, *edits will be lost*! ***
.\"
.\"
.TH ZGV 1 "28th January 2005" "Version 5.9" "Graphics Software"
.SH NAME
zgv \- picture viewer for VGA/SVGA displays
.\"
.SH SYNOPSIS
zgv [\fIoptions\fR] [\fIstart-dir\fR | \fIfile\fR [\fIfile2\fR ...]]
.SH "DESCRIPTION"
(NB: This man page is automagically generated from zgv's
texinfo file, and so may look a bit odd.
We apologise for the inconvenience. :-))
.PP
zgv lets you view pictures on Linux or FreeBSD boxes with VGA/SVGA
displays. The kinds of pictures it supports are raster-format pictures
(sometimes called `bitmaps' and/or `pixmaps'); things like GIF files,
JPEG files, PNG files, and so on. (The full list of file formats
supported is listed elsewhere. See \fBSupported File Formats\fR.)
.PP
Most of the time, you will probably want to use zgv's file selector
(see \fBThe File Selector\fR) to pick which file(s) to view. This is what
appears when you start zgv as just `\fBzgv\fR' (see \fBOptions\fR). It
displays a list of subdirectories and picture files in the current
directory, along with small `thumbnail' versions of the pictures if they
exist. (If no thumbnails appear for a given directory, or if they are
missing for some files, you can create/update them by pressing `\fBu\fR'.
See \fBUpdating Thumbnails\fR.)
.PP
When you've picked a file to view, you can view it by pressing
`\fBEnter\fR'. This puts you into the viewer, where the whole screen is
used to display the picture (see \fBThe Viewer\fR). You can then move
around the picture (if it is larger than the screen) using the cursor
keys. Pressing `\fBEsc\fR' returns you to the file selector, where you can
pick another file to view, or you can quit zgv by pressing `\fBEsc\fR'
again.
.PP
While zgv is by default controlled entirely from the keyboard, it does
have quite good mouse support you can enable if you like that sort of
thing. See \fBUsing a Mouse\fR.
.PP
This overview is, as you might expect, only the very simplest of
introductions to what zgv can do, and describes only a very basic use of
zgv. zgv can do a lot more; read on to find out what.
.PP
.SH "ACKNOWLEDGEMENTS"
zgv was primarily written by Russell Marks, who also wrote this manual.
.PP
Matan Ziv-Av added multiple-image animated GIF support, Photo-CD
support, brightness/contrast support in high-colour modes, the original
file-rename code, and some of the support for 32-bit modes, as well as
inspiring a few other changes like high-res file selector support.
.PP
Carsten Engelmann wrote the BMP support.
.PP
Edwin Fong added support for command-line slideshows, and a few other
features including the original mouse support.
.PP
Radim Kolar added support for FreeBSD.
.PP
Costa Sapuntzakis contributed code for much faster JPEG thumbnail
generation.
.PP
Dimitar Zhekov added SDL mouse support.
.PP
`\fBinstall-info\fR' is a (very) slightly modified version of the
original (which is part of the `\fBtexinfo\fR' package). This program is
used during installation. I think it was mostly written by Karl Berry,
but it's not terribly clear.
.PP
The authors of the special-purpose libraries zgv uses deserve credit ---
JPEG and PNG might not have been supported in zgv without the JPEG
library, libpng and zlib. Most of all though, zgv would certainly not
have been written without VGAlib and later svgalib, and thanks are due
to Tommy Frandsen, Harm Hanemaayer, Michael Weller, Matan Ziv-Av and
many others for that.
.PP
Thanks also to the zgv users who've contributed bug reports,
suggestions, ideas for features, and even... dare I say...
compliments. zgv would be even worse without their input, so count your
lucky stars. :-)
.PP
This program is based in part on the work of the Independent JPEG
Group.
.PP
``The Graphics Interchange Format(c) is the Copyright property of
CompuServe Incorporated. GIF(sm) is a Service Mark property of
CompuServe Incorporated.''
.PP
.SH "OPTIONS"
Normally you'd invoke zgv as plain `\fBzgv\fR'. However, you can directly
specify files to view or a start directory on the command-line. In
addition, there are various options.
.PP
(If you're new to zgv, you should probably skip the rest of this section
for now and come back to it later.)
.PP
The general format of the zgv command-line goes roughly like this:
.PP
zgv [\fIoptions\fR] [\fIstart-dir\fR | \fIfile\fR [\fIfile2\fR ...]]
.br
.PP
Two types of options are supported --- the traditional Unix
single-letter options, and GNU-style long options. Both forms are listed
in the table below, but not all long options have single-letter
equivalents.
.PP
Note that all options are processed after any configuration file(s).
Config file settings are just like the long-option names below minus the
`\fB--\fR' (see \fBConfiguring zgv\fR), though a few command-line options
are not permitted as config file settings (e.g. `\fBhelp\fR'), and vice
versa.
.PP
Here's what the options do:
.PP
`\fB-A\fR'
.RS
.RE
`\fB--auto-animate\fR'
.RS
Automatically animate multiple-image GIF files (see \fBMultiple-image
GIF Animation\fR). This limits your viewing options greatly, but can be
handy for slideshows and the like.
.PP
.RE
`\fB--auto-mode-fit\fR'
.RS
Automatically switch modes to suit image size.
.PP
.RE
`\fB--auto-mode-fit-diff \fIdiff\fR\fR'
.RS
When choosing an auto-mode-fit mode, add \fIdiff\fR to each mode's
width and height. For example, with a value of 20 any picture up to
820x620 will be displayed in an 800x600 mode if possible. If
\fIdiff\fR is negative, for example -20, the effect is reversed; any
picture above 780x580 will be displayed in a mode with a resolution
higher than 800x600 if possible.
.PP
.RE
`\fB-p\fR'
.RS
.RE
`\fB--avoid-single-progress\fR'
.RS
Don't show progress indicator when loading a single file from the
command-line.
.PP
.RE
`\fB--black-background\fR'
.RS
Try to use a black (or nearest-to-black) background when in 8-bit modes.
This can be quite nice for consistency's sake when viewing (say) a
mixture of GIFs and JPEGs, but the extra pass over the loaded image
slows things down slightly.
.PP
.RE
`\fB-b\fR'
.RS
.RE
`\fB--block-cursor\fR'
.RS
Use a blocky outline cursor in the selector, which is rather unsubtle
but more obvious.
.PP
.RE
`\fB--brightness \fIadjust_val\fR\fR'
.RS
Specify how much to add to colour values to change brightness (default
0). Values less than zero decrease brightness, values greater than zero
increase it. Brightness is applied after contrast by default.
.PP
.RE
`\fB--centre\fR'
.RS
.RE
`\fB--center\fR'
.RS
(Normally enabled, use e.g. `\fB--centre=off\fR' to disable.) By default
zgv centres pictures smaller than the screen, in whichever dimensions
they are smaller. This setting gives you a way to disable this, so that
pictures always start in the top-left.
			
.RE
`\fB--clear-screen-on-exit\fR'
.RS
Clear the screen on exit. (Normally, zgv leaves the original screen
contents intact.)
.PP
.RE
`\fB--col-black \fIr g b\fR\fR'
.RS
Set colour used for `black' (text) in selector; RGB values should be in
the range 0-63 for this and the other colour settings below, and the
three numbers should be quoted, e.g. `\fB--col-black "10 20 30"\fR'.
.PP
.RE
`\fB--col-dark \fIr g b\fR\fR'
.RS
Set colour used for lowlights in selector.
.PP
.RE
`\fB--col-light \fIr g b\fR\fR'
.RS
Set colour used for highlights in selector.
.PP
.RE
`\fB--col-medium \fIr g b\fR\fR'
.RS
Set colour used for background in selector.
.PP
.RE
`\fB--col-tagged \fIr g b\fR\fR'
.RS
Set colour used for tagged files in selector.
.PP
.RE
`\fB--contrast \fImultiplier\fR\fR'
.RS
Specify how much to multiply colour values by to change contrast
(default 1.0). zgv multiplies each colour's difference from grey by this
number; values less than one decrease contrast, values greater than one
increase it. Negative values are also allowed, and act in a similar way,
but with the picture's colours inverted. Contrast is applied before
brightness by default.
.PP
.RE
`\fB--delete-single-prompt\fR'
.RS
(Normally enabled, use `\fB--delete-single-prompt=off\fR' to disable.) If
disabled, don't prompt for confirmation when deleting a single file.
.PP
.RE
`\fB--delete-tagged-prompt\fR'
.RS
(Normally enabled, use `\fB--delete-tagged-prompt=off\fR' to disable.)
If disabled, don't prompt for confirmation when deleting all tagged
files.
.PP
.RE
`\fB--dither-16col-fast\fR'
.RS
(Normally enabled, use `\fB--dither-16col-fast=off\fR' to disable.) By
default, zgv uses a (reasonably fast) ordered dither when displaying a
dithered colour image in 640x480x4 mode. But if you disable this
setting, it uses error-diffused dithering (which looks better but is
rather noticeably slower).
.PP
.RE
`\fB--dither-hicol\fR'
.RS
If enabled, use dithering in `high-colour' modes, i.e. 15/16-bit
modes. This makes colour gradients smoother, but slows things down
quite a bit.
.PP
.RE
`\fB--fake-cols\fR'
.RS
(Normally enabled, use `\fB--fake-cols=off\fR' to disable.) If disabled,
don't fake extra greyscales and colour depth in 8-bit modes.
See \fBIncreased Greyscales\fR, for details.
.PP
.RE
`\fB--force-fs-16col\fR'
.RS
Force the use of the 640x480 16-colour mode for the selector.
.PP
.RE
`\fB-j\fR'
.RS
.RE
`\fB--force-viewer-8bit\fR'
.RS
Force all images to be loaded as 8-bit. Normally zgv will load 24-bit
images (e.g. colour JPEGs) as 24-bit if you have any modes capable of
displaying the image in 15, 16, 24, or 32-bit colour.
.PP
.RE
`\fB--fs-16col-colour-thumbnails\fR'
.RS
.RE
`\fB--fs-16col-color-thumbnails\fR'
.RS
Use low-quality colour thumbnail pictures when the file selector is
using 640x480 16-colour mode. Normally zgv uses higher-quality
monochrome thumbnails in this situation.
.PP
.RE
`\fB--fs-ignore-old-pos\fR'
.RS
Don't recall previous cursor position in a directory when returning to
it later. (This mechanism only applies when changing directory
`normally'; jumping directly to another dir with `\fBG\fR' never does such
a save/restore (see \fBChanging Directory\fR).)
.PP
.RE
`\fB--fs-magic\fR'
.RS
Use `magic number'-type identification to determine which files should
be listed in the file selector. This is more accurate, but very much
slower. See \fBFile Type Identification\fR, for a discussion of the
tradeoffs involved.
.PP
.RE
`\fB--fs-perfect-cols\fR'
.RS
Don't change thumbnail colours when using the file selector to make the
rest of the selector look right. See \fBThumbnail Issues\fR.
.PP
.RE
`\fB--fs-slow-thumbnail-update\fR'
.RS
`Walk' through the directory when updating thumbnails, moving the cursor
over every single picture whether it needs updating or not. Normally,
zgv completely skips any pictures which don't need updating, which makes
it considerably faster on large directories and/or slow machines.
.PP
.RE
`\fB--fs-small-text\fR'
.RS
Reduce the size of the filename text in the selector. You may find this
useful if you think the text is too big, or if you'd like to see more of
the filename without having to press `\fB:\fR'.
.PP
.RE
`\fB--fs-start-mode \fImodespec\fR\fR'
.RS
Specify the video mode zgv should start off using for the file
selector. (The default is 640x480x8 if possible, otherwise 640x480x4.)
The `modespec' should be the width, height, and depth in quotes, e.g.
`\fB"640 480 8"\fR'. See \fBVideo Modes\fR, for details of precisely what
this means. The specified depth is actually ignored in this case, as
you can only choose 8-bit modes for the selector.
.PP
.RE
`\fB-t\fR'
.RS
.RE
`\fB--fs-thick-text\fR'
.RS
Thicken the text (filenames etc.) in the file selector (and elsewhere).
(Note that if \fIline-text\fR has been enabled, then
\fIfs-thick-text\fR only has an effect if \fIblock-cursor\fR is on as
well.)
.PP
.RE
`\fB--fullscreen\fR'
.RS
(Normally enabled, use `\fB--fullscreen=off\fR' to disable.) This
option only applies when using the SDL backend. By default, zgv
generally uses the entire screen for its display. But if you disable
this option, it tries to run in a window when possible (e.g. when
running under X). Note that zgv won't be able to fill the screen in
modes it doesn't natively support, in either case.
.PP
.RE
`\fB-G \fIval\fR\fR'
.RS
.RE
`\fB--gamma \fIval\fR\fR'
.RS
Set the gamma adjustment used (see \fBGamma Adjustment\fR). This also sets
the `initial value' used when resetting the gamma adjustment. The
default is 1.0, i.e. no adjustment.
.PP
.RE
`\fB--gnulitically-correct\fR'
.RS
GNU has \fIPOSIXLY_CORRECT\fR for compatibility with silly POSIX
misfeatures, and zgv has...
.PP
.RE
`\fB-h\fR'
.RS
.RE
`\fB--help\fR'
.RS
Display a list of options and a terse description of what the options
do.
.PP
.RE
`\fB-i\fR'
.RS
.RE
`\fB--ignore-errors\fR'
.RS
When loading a single file from the command-line, ignore (some) errors.
Only meaningful for PNG currently.
.PP
.RE
`\fB--jpeg-index-style \fIstyle\fR\fR'
.RS
Specify how to read JPEGs when creating thumbnails. Style `\fB1\fR' is
the quickest, but sometimes generates rather fuzzy/blocky thumbnails;
`\fB2\fR' is fairly cautious (and the default), but still quite fast;
`\fB3\fR' is an extremely cautious and slow method.
.PP
.RE
`\fB-J \fItype\fR\fR'
.RS
.RE
`\fB--jpeg-speed \fItype\fR\fR'
.RS
Set JPEG speed/quality tradeoff. Type `\fB1\fR' is slow but accurate;
`\fB2\fR' is faster but not as accurate (and the default); `\fB3\fR' is
the fastest but the least accurate.
.PP
.RE
`\fB--line-text\fR'
.RS
Draw text by drawing lines rather than using bitmap fonts. This looks
worse but is faster.
.PP
.RE
`\fB-M\fR'
.RS
.RE
`\fB--mouse\fR'
.RS
Enable mouse support in zgv. \fI/dev/mouse\fR must be (usually a
symlink to) the mouse device. The actual configuration of the mouse
should be done via svgalib's config file \fIlibvga.config\fR; see the
man page for that for details.
.PP
.RE
`\fB--mouse-scale \fIscale\fR\fR'
.RS
Set the ratio of `mouse pixels' to onscreen pixels. The larger the
number, the slower the mouse moves, and vice versa. (However, the number
must be greater than zero.) If the mouse pointer moves at the wrong
speed for your tastes, play about with this setting and you should be
able to fix it.
.PP
.RE
`\fB--pcd-res \fIresnum\fR\fR'
.RS
Selects the resolution used for Photo-CD files; 1=192x128, 2=384x256,
3=768x512 (default), 4=1536x1024, 5=3072x2048. (This setting only has an
effect if Photo-CD support was enabled at compile-time.)
.PP
.RE
`\fB-g\fR'
.RS
.RE
`\fB--pgm-truecol\fR'
.RS
This one needs some background to fully explain --- greyscale files are
normally displayed in 8-bit modes, which due to VGA's limited palette
means that only 64 greyscales can be shown (zgv normally fakes extra
ones, though; see \fBIncreased Greyscales\fR). But for people who work
with greyscale files and have 24/32-bit video modes available this can
be frustrating, as 24/32-bit modes display 256 greyscales. For this
reason, using the `\fB--pgm-truecol\fR' option enables a special-case
hack to read (only) PGM files as if they were 24-bit. Using a 24/32-bit
mode then gives you 256 greyscales. (Be careful to avoid 15/16-bit modes
as these will only give 32! See \fBDrawbacks of 15/16-bit Modes\fR.)
.PP
.RE
`\fB-r \fIseconds\fR\fR'
.RS
.RE
`\fB--reload-delay \fIseconds\fR\fR'
.RS
If \fIseconds\fR is positive, then any picture displayed is re-read
and redisplayed (without clearing the screen first) every
\fIseconds\fR seconds. If it's `\fB0\fR' (zero), or negative, the
picture is only read once --- the default. Unless this option has
suddenly inspired you to write an interesting little shell script,
you're unlikely ever to have a use for it. :-)
.PP
.RE
`\fB--reverse-bc-order\fR'
.RS
Normally, any brightness modification is applied after applying any
contrast. Enabling this reverses the order.
.PP
.RE
`\fB--revert-orient\fR'
.RS
(Normally enabled, use `\fB--revert-orient=off\fR' to disable.) If
disabled, orientation (flip/mirror/rotate) state is retained between
pictures.
.PP
.RE
`\fB--revert-scale\fR'
.RS
(Normally enabled, use `\fB--revert-scale=off\fR' to disable.) If
disabled, scaling is retained between pictures.
.PP
.RE
`\fB--scrollbar\fR'
.RS
(Normally enabled, use `\fB--scrollbar=off\fR' to disable.) If disabled,
don't show a scrollbar below the selector.
.PP
.RE
`\fB-s\fR'
.RS
.RE
`\fB--show-dimensions\fR'
.RS
Cause zgv to output the x and y offsets, and width and height of the
section of the image being displayed when you exit zgv. Can be useful
for things like `\fBpnmcut `zgv -s input.ppm` input.ppm > output.ppm\fR'.
.PP
.RE
`\fB-T\fR'
.RS
.RE
`\fB--show-tagged\fR'
.RS
Print names of tagged files on exit. This can be useful in constructions
something like `\fBmv `zgv -T` /tmp\fR', which moves to \fI/tmp\fR only
the files you select.
.PP
.RE
`\fB--show-xvpics-dir\fR'
.RS
Show any \fI.xvpics\fR directories so that the thumbnails can be viewed
even if the files they referred to no longer exist. (However, it's
usually easier to simply start zgv in the \fI.xvpics\fR dir.)
.PP
.RE
`\fB-S \fIdelay\fR\fR'
.RS
.RE
`\fB--slideshow-delay \fIdelay\fR\fR'
.RS
Set time to wait in seconds before loading the next picture in a
slideshow. The default is 4.
.PP
.RE
`\fB-l\fR'
.RS
.RE
`\fB--slideshow-loop\fR'
.RS
Loop in slideshows `forever' (or rather, until you exit).
.PP
.RE
`\fB-R\fR'
.RS
.RE
`\fB--slideshow-randomise\fR'
.RS
.RE
`\fB--slideshow-randomize\fR'
.RS
Randomise picture order in slideshows. Due to the shuffling approach
taken, there will be no repeats or omissions.
.PP
.RE
`\fB--viewer-16col-colour\fR'
.RS
.RE
`\fB--viewer-16col-color\fR'
.RS
Give a dithered colour image in 640x480x4 mode when in the viewer
(see \fBThe Viewer 640x480x4 Mode\fR), rather than greyscale.
.PP
.RE
`\fB-m \fImodespec\fR\fR'
.RS
.RE
`\fB--viewer-start-mode \fImodespec\fR\fR'
.RS
Specify the video mode zgv should start off using for the viewer. The
default is generally 640x480x8, but it's actually a bit more complicated
than that (see \fBDefault Video Mode\fR). The `modespec' should be the
width, height, and depth in quotes, e.g. `\fB"640 480 8"\fR'. See \fBVideo
Modes\fR, for details of precisely what this means.
.PP
.RE
`\fB--visual\fR'
.RS
(Normally enabled, use `\fB--visual=off\fR' to disable.) If disabled, no
thumbnails are shown.
.PP
.RE
`\fB-k\fR'
.RS
.RE
`\fB--vkludge\fR'
.RS
enables vkludge, which smoothes slightly when `zooming' a big picture
down to screen size, and also when in 320x400 and 360x480 modes.
.PP
.RE
`\fB--version\fR'
.RS
Show version number.
.PP
.RE
`\fB-w\fR'
.RS
.RE
`\fB--write-ppm\fR'
.RS
Write the file as a PPM to stdout rather than viewing it. (This only
works if you run zgv on a single file, specified on the command-line.)
You're usually better off using a dedicated image-converting program,
though.
.PP
.RE
`\fB--xzgv-keys\fR'
.RS
Makes zgv acts a bit more like xzgv, at least in terms of the keypresses
it supports (see \fBxzgv Compatibility\fR).
.PP
.RE
`\fB-z\fR'
.RS
.RE
`\fB--zoom\fR'
.RS
Enable zoom mode, which resizes the picture to fit the screen.
See \fBZoom Mode\fR.
.PP
.RE
`\fB--zoom-reduce-only\fR'
.RS
When in zoom mode, only \fIreduce\fR pictures to fit; i.e. make big
pictures viewable all-at-once while leaving small picures intact.
.RE
.PP
If zgv is started with `\fBzgv \fIfile\fR\fR', zgv auto-loads the file
(bypassing the file selector), and exits when you exit from viewing the
picture. (By the way, this also makes it possible to view single files
without the usual extensions such as \fI.gif\fR, etc. See \fBFile Type
Identification\fR.)
.PP
If started with `\fBzgv \fIfile file2 ...\fR\fR' --- i.e. with more than
one filename --- zgv works in a similar way, except the multiple files
are shown as a slideshow, one after the other. You may want to specify
`\fB-l\fR' so that zgv will loop around these pictures until `\fBEsc\fR' is
pressed, and the `\fB-R\fR' option to shuffle (randomise) the picture
order may also be of interest.
.PP
If started with `\fBzgv \fIstart-dir\fR\fR', zgv starts up with the usual
file selector, but with the current directory being the one specified.
.PP
Settings which are either on or off (boolean) are, as you might expect,
enabled by using e.g. `\fB-z\fR' or `\fB--zoom\fR'. However, there's an
alternative long-option form for setting these, resembling how they're
set in config files --- the syntax is `\fB--option=\fIstate\fR\fR', where
\fIstate\fR is `\fBon\fR'/`\fBy\fR'/`\fByes\fR'/`\fB1\fR' to enable the
option, or `\fBoff\fR'/`\fBn\fR'/`\fBno\fR'/`\fB0\fR' to disable it. The
most useful thing about this is that it allows you to disable options
which were previously enabled, by using e.g. `\fB--zoom=off\fR'.
.PP
(Readers used to the way GNU-style long options work should note that,
since this `\fBon\fR'/`\fBoff\fR'/etc. arg is optional, you can't use the
`\fB--option arg\fR' form in this case; it must be `\fB--option=arg\fR'
for it to work.)
.PP
.SH "ONLINE HELP"
Online help (of a sort) is available in both the file selector and
viewer:
.PP
`\fB?\fR'
.RS
Gives online help. This lists some of the most commonly-used keypresses
in the current context.
.RE
.PP
In the viewer, you can also get a list of which key combinations select
which video modes. See \fBSelecting a Video Mode\fR.
.PP
.SH "THE FILE SELECTOR"
Usually, on starting up zgv, you will enter the file selector, which
lets you pick files to view (among other things). This lists the
subdirectories and picture files in the current directory, along with
small `thumbnail' versions of the pictures if they exist.
.PP
.SH "EXITING ZGV"
Exiting zgv can be achieved two ways:
.PP
`\fBEsc\fR'
.RS
.RE
`\fBx\fR'
.RS
Quit zgv normally.
.PP
.RE
`\fB^C\fR'
.RS
Quit zgv in a rather immediate and nasty way, by sending \fISIGINT\fR.
(This is actually dealt with by svgalib.) You should only use ^C to quit
if zgv appears to lock up or takes an unbearably long time to do
something.
.PP
(Technically it may not be `\fB^C\fR' which sends \fISIGINT\fR, but you
would have to have a strange setup for this to be the case.)
.RE
.PP
.SH "THUMBNAILS"
(This section is deliberately early on in the manual, as thumbnails are
probably the most important feature of the file selector, so it's best
that you know how to create/update them sooner rather than later.)
.PP
Thumbnails are small versions of the pictures they represent, and are
displayed by the file selector if they exist. zgv uses xv-compatible
thumbnails --- if you create thumbnails with xv they will work with zgv,
and vice versa. zgv's thumbnails are also compatible with the Gimp, and
xzgv.
.PP
If no thumbnail exists for a file or directory, a small `document' or
`folder' graphic appears instead.
.PP
.SS "Updating Thumbnails"
While thumbnails can be made relatively quickly, it's by no means an
instant process. For this reason, thumbnails have to be created in
advance, and are stored as files in their own right in (usually) a
subdirectory \fI.xvpics\fR.
.PP
zgv never creates/updates thumbnails without you telling it to. So, if
you enter a directory where the picture files don't have any thumbnails,
or where the thumbnails seem to be out of date, you should press
`\fBu\fR'.
.PP
Alternatively, you can create/update thumbnails for the current
directory and all subdirectories by using `\fBAlt-u\fR'. But be warned
that a recursive update can take some time!
.PP
`\fBu\fR'
.RS
Create thumbnails for any files which don't have them, and update
thumbnails which are older than than the corresponding file. While this
is going on, the text \fIupdating index of\fR prefixes the usual
display of the current directory's name.
.PP
You can press `\fBEsc\fR' while the update is in progress to abort it; zgv
will stop once it has finished the thumbnail it is currently working on
(if any).
.PP
If you switch consoles while the update is in progress, it will continue
to run `in the background'. When you switch back, if the update is still
in progress, it may look as though zgv is doing nothing (or the screen
may look a bit confusing) for some time. The reason is that the screen
is not updated unless zgv is running on the currently displayed console
(this is unfortunately necessary). The screen is redrawn when the
current thumbnail has been dealt with.
.PP
.RE
`\fBAlt-u\fR'
.RS
Create/update thumbnails for all files in the current directory and all
subdirectories --- in other words, do a recursive update. This can take
some time, so you are prompted to confirm that you really want to do
this (see \fBDialog Boxes\fR). As above, it will continue running `in the
background' if you switch consoles, and you can press `\fBEsc\fR' to
abort.
.PP
.RE
`\fBd\fR'
.RS
Create thumbnails for subdirectories. Don't confuse this with the
recursive update; this generates thumbnails for the directories
\fIthemselves\fR, not the files within them. (Most people probably
won't want to bother with these, as they're not as helpful as you might
think.) These consist of the first four files in the subdir, squeezed
together into a single thumbnail. There is (currently) no `update'
mechanism for subdir thumbnails --- all of them are newly created each
time you press `\fBd\fR'.
.RE
.PP
.SS "Thumbnail Storage"
Normally, thumbnails are stored in the subdirectory \fI.xvpics\fR
(creating the dir first if needed), with the same name as the filename
they represent. However, there are times when using \fI.xvpics\fR isn't
possible --- for example, the filesystem may be read-only (such as on a
CD), or may not support the \fI.xvpics\fR name (such as on an
\fImsdos\fR filesystem), or you may not have permission to write to the
directory.
.PP
In these situations, zgv stores the thumbnails elsewhere. They go in
directories under the \fI.xvpics\fR dir in your home directory. The
name for the directory they go in there is the directory name they were
found in, but with slashes (`\fB/\fR') converted to underscores
(`\fB_\fR').
.PP
An example should make things clearer. Say zgv needs to create a
thumbnail for \fIwibble.jpg\fR, in the directory \fI/foo/bar/baz\fR,
but can't use \fI.xvpics\fR. It will put the thumbnail in
\fI$HOME/.xvpics/_foo_bar_baz/wibble.jpg\fR, creating directories as
necessary.
.PP
Where a thumbnail is stored makes virtually no difference to how zgv
works; the main difference is that the latter, more indirect way of
storing thumbnails means that thumbnails will take slighter longer to
display.
.PP
.SS "Thumbnail Issues"
The thumbnails used in zgv require 256 colours to display.
Unfortunately, the rest of zgv's file selector needs an additional five
colours. Normally this is dealt with by finding the `closest' thumbnail
colours, and (this is the important part) changing them to the file
selector colours. The disturbance to the thumbnails should be barely
noticeable.
.PP
(All the same, you can disable this using the config file setting
\fIfs-perfect-cols\fR (see \fBConfiguring zgv\fR). But bear in mind
that the selector will then look rather strange!)
.PP
In 16-colour mode (see \fB16-colour File Selector\fR), the way it works
means fewer colours are needed, and the file selector's five colours can
be (and are) separate from the thumbnail colours.
.PP
.SH "SCREEN LAYOUT"
The file selector is simply a list of subdirectories and filenames,
along with any thumbnails that exist for them. The list is in
asciibetical order (but you can change this; see \fBChanging the Sorting
Order\fR). Names of directories are shown (like this), and they are shown
in order at the beginning of the list, before all the picture files.
Long filenames are truncated to fit; three dots indicate where this has
happened. (See \fBOther File Sel Commands\fR, for how to display the full
filename.)
.PP
The list is often larger than can fit on the screen at once. If this is
the case, only part is shown at a time, but you can move around the list
with the cursor keys and the like.
.PP
The colours used for the file selector can be changed, if you dislike
the defaults (see \fBConfiguring zgv\fR).
.PP
.SH "MOVING AROUND THE LIST"
The cursor in zgv is (normally) shown as a `raised' entry in the list.
The cursor has two main functions:
.PP
\fB-\fR 
It selects a file for `view', `tag' etc. commands to operate on.
.PP
\fB-\fR 
It determines which part of the list is shown, as the part of the list
shown onscreen always contains the cursor.
.RE
.PP
There are many commands for moving the cursor. In summary, most
`special' keys like the cursors do what you'd imagine they do --- also,
a few Emacs-like keys, a few vi-like keys, and the Sinclair
Spectrum-style (!) QAOP keys are supported.
.PP
Using a mouse in the file selector is not covered here. See \fBMouse
Funcs in the File Selector\fR, for details of what you can do with a
mouse. (Experienced users may wish to consult the \fITom & Jerry\fR and
\fIPinky and the Brain\fR cartoons for further enlightenment on this
subject.)
.PP
`\fBCursor Up\fR'
.RS
.RE
`\fB^P\fR'
.RS
.RE
`\fBk\fR'
.RS
.RE
`\fBq\fR'
.RS
Move up. Moving up from a topmost entry moves to the bottom of the
previous column.
.PP
.RE
`\fBCursor Down\fR'
.RS
.RE
`\fB^N\fR'
.RS
.RE
`\fBj\fR'
.RS
.RE
`\fBa\fR'
.RS
Move down. Moving down from a bottommost entry moves to the top of the
next column.
.PP
.RE
`\fBCursor Left\fR'
.RS
.RE
`\fB^B\fR'
.RS
.RE
`\fBh\fR'
.RS
.RE
`\fBo\fR'
.RS
Move left one column.
.PP
.RE
`\fBCursor Right\fR'
.RS
.RE
`\fB^F\fR'
.RS
.RE
`\fBl\fR'
.RS
.RE
`\fBp\fR'
.RS
Move right one column.
.PP
.RE
`\fBPage Up\fR'
.RS
.RE
`\fB^U\fR'
.RS
Move the cursor back (nearly) a page.
.PP
.RE
`\fBPage Down\fR'
.RS
.RE
`\fB^V\fR'
.RS
Move the cursor forward (nearly) a page.
.PP
.RE
`\fBHome\fR'
.RS
.RE
`\fB^A\fR'
.RS
Move the cursor to the start of the list.
.PP
.RE
`\fBEnd\fR'
.RS
.RE
`\fB^E\fR'
.RS
Move the cursor to the end of the list.
.PP
.RE
`\fBg\fR'
.RS
.RE
`\fB'\fR'
.RS
Move the cursor to the first filename starting with the next key
pressed, which would generally be a letter or number. Case is
significant; `\fBa\fR' and `\fBA\fR' are different.
.PP
If no files start with the specified character, it moves to the first
file which starts with a later char (in asciibetical order). If there
are none for which this is the case, it moves to the last file ---
unless there are no files (just directories), in which case it has no
effect.
.PP
.RE
.PP
.SH "VIEWING A FILE"
There are two ways to view files from the file selector. The usual way
is to press `\fBEnter\fR' when you've moved the cursor to the file to
view. However, you can also view tagged files as a `slideshow', which is
described later (see \fBTagging\fR).
.PP
`\fBEnter\fR'
.RS
View a picture file, or if the cursor is on a subdirectory, make that
the current directory. A progress indicator is shown when reading in a
file --- while this is onscreen, you can use `\fBEsc\fR' to abort.
.RE
.PP
.SH "DIALOG BOXES"
If zgv has a serious problem reading a file, it will give an error.
Errors are shown in boxes which appear in the middle of the screen ---
they stay there until you press `\fBEnter\fR' or `\fBEsc\fR' (if using a
mouse, clicking \fIOK\fR has the same effect).
.PP
zgv also uses similar dialog boxes for other things:
.PP
\fB-\fR 
Getting a yes or no answer. `\fBEnter\fR' or `\fBy\fR' picks `yes';
`\fBEsc\fR' or `\fBn\fR' picks no. (Again, you can click on the relevant
button with the mouse to do the same.)
.PP
\fB-\fR 
Reading a directory name. Here you should type the directory name then
`\fBEnter\fR', or press `\fBEsc\fR' to abort. In fact, this line-input
dialog allows a certain amount of editing, and so supports these
additional keys:
.PP
`\fBCursor Left\fR'
.RS
.RE
`\fB^B\fR'
.RS
Move the cursor left. (An underline character shows the cursor
position.)
.PP
.RE
`\fBCursor Right\fR'
.RS
.RE
`\fB^F\fR'
.RS
Move the cursor right.
.PP
.RE
`\fBHome\fR'
.RS
.RE
`\fB^A\fR'
.RS
Move the cursor to the start of the line.
.PP
.RE
`\fBEnd\fR'
.RS
.RE
`\fB^E\fR'
.RS
Move the cursor to the end of the line.
.PP
.RE
`\fBInsert\fR'
.RS
.RE
`\fB^I\fR'
.RS
Toggle insert/overwrite mode. (Insert mode is the default.) In insert
mode, characters you type are inserted at the cursor position. In
overwrite mode, they replace the existing chars.
.PP
.RE
`\fBBackspace\fR'
.RS
.RE
`\fB^H\fR'
.RS
Delete char to the left of the cursor. (This assumes `\fBBackspace\fR'
really generates a `\fBDEL\fR', which is the usual setup on Linux. Note
that `\fBBackspace\fR' is (usually) the key above the main `\fBEnter\fR'
key; it is often labelled simply as an arrow.)
.PP
.RE
`\fBDelete\fR'
.RS
.RE
`\fB^D\fR'
.RS
Delete the char the cursor is on.
.RE
.RE
.PP
.SH "TAGGING"
The file selector is not restricted to working on one file at a time.
You can `tag' as many (or as few) files as you wish, and certain
commands described in this section will act on them.
.PP
Initially, all files are untagged, and the filenames appear in black.
Tagged files appear in red. (See \fBConfiguring zgv\fR, if you'd prefer zgv
to use different colours.)
.PP
.SS "Tag and Untag Commands"
There are several ways to tag or untag files. The ones which work on
individual files also move the cursor forward one place afterwards, to
make tagging or untagging multiple files easier.
.PP
As elsewhere in zgv, the case of the keys is significant --- the `\fBt\fR'
(unshifted `\fBt\fR') command has quite a different effect to that of
`\fBT\fR' (shifted `\fBt\fR').
.PP
There is also a command available in the viewer to tag the
currently-viewed file. See \fBChanging Picture\fR, for details.
.PP
`\fBt\fR'
.RS
Tag file.
.PP
.RE
`\fBn\fR'
.RS
Untag file. Note that this is `\fBn\fR' (for `no tag', er, or something
like that); `\fBu\fR' would be more logical, but that is used for updating
thumbnails.
.PP
.RE
`\fBT\fR'
.RS
Tag all files.
.PP
.RE
`\fBN\fR'
.RS
Untag all files. This is on `\fBN\fR' rather than `\fBU\fR' for consistency.
.PP
.RE
`\fBSpace\fR'
.RS
Toggle the tag status of the file --- if it's tagged, untag it; if it's
untagged, tag it.
.RE
.PP
To see how many files are tagged, use `\fBAlt-f\fR' (see \fBOther File Sel
Commands\fR).
.PP
.SS "Slideshows"
A `slideshow' lets you view all the tagged files in the current
directory one after the other, or in a randomised order if `shuffling'
is enabled (see \fBFile Selector Toggles\fR):
.PP
`\fBTab\fR'
.RS
View the tagged files as a slideshow. (`\fBTab\fR' is usually the key
above `\fBCaps Lock\fR', which is often labelled with two arrows.)
.RE
.PP
Each file is shown for a certain amount of time, normally 4 seconds.
(See \fBOptions\fR, if you find this too short or long.) After the
time runs out, the next file is shown. You can cut this delay short by
hand using one of the viewer's change-picture commands such as
`\fBSpace\fR' (see \fBChanging Picture\fR), or abort the slideshow
prematurely by pressing `\fBEsc\fR'. You can also pause a slideshow so
that you remain on the current file until you unpause it (see \fBPausing
Slideshows\fR).
.PP
Normally, once each file has been shown the slideshow ends, and you are
returned to the file selector. But if looping is enabled, the slideshow
repeats until you press `\fBEsc\fR' (see \fBFile Selector Toggles\fR).
.PP
.SS "Copying/Moving/Deleting Files"
You can copy or move tagged files to a directory you specify, or
delete all tagged files. If no files are tagged, zgv
copies/moves/deletes the file the cursor is currently on --- unless
the cursor is on a subdirectory, in which case it gives an error.
.PP
Note that the commands given here are uppercase --- lowercase `\fBc\fR',
`\fBm\fR', and `\fBd\fR' do not do the same thing.
.PP
`\fBC\fR'
.RS
Copy tagged files (or the current file) to a given directory. zgv asks
for the destination directory using a dialog (see \fBDialog Boxes\fR) and
copies the files there. If it comes to copy a file but there is an
existing file in the dir with the same name, the file is not copied and
nor are any of the remaining files.
.PP
.RE
`\fBM\fR'
.RS
Move tagged files (or the current file) similarly.
.PP
.RE
`\fBD\fR'
.RS
Delete tagged files (or the current file) similarly. In this case,
there's obviously no need to specify any directory :-) but you're
prompted before deletion starts (unless this is disabled,
see \fBConfiguring zgv\fR). It also deletes thumbnails, for those files
which have them.
.RE
.PP
.SH "RENAMING A FILE"
As well as copying/moving files, you can rename them:
.PP
`\fBR\fR'
.RS
.RE
`\fBAlt-r\fR'
.RS
Rename the current file or directory --- zgv will refuse to overwrite
any existing files/directories. The new name must remain in the
current directory. (See \fBCopying/Moving/Deleting Files\fR, for how to
move a file to a different directory (albeit keeping the same name).)
.RE
.PP
It's better to use `\fBR\fR' than `\fBAlt-r\fR'; the latter never made much
sense, and is likely to be removed before long.
.PP
.SH "CHANGING DIRECTORY"
The easiest way to change the current directory in zgv is usually to
select a directory entry in the file list and press `\fBEnter\fR'.
(Selecting `\fB(..)\fR' moves to the parent directory of the current
one.)
.PP
There is an alternative though:
.PP
(Note that this command is shift-`\fBg\fR', not `\fBg\fR'.)
.PP
`\fBG\fR'
.RS
Go to a specified directory. zgv asks for the destination directory
using a dialog box which you should type the dir's name into
(see \fBDialog Boxes\fR), and moves to that directory if it exists.
.PP
If the directory turns out to be unreadable --- i.e. you do not have
permission to read it --- zgv resorts to going to your home directory.
(This is actually a general mechanism in zgv, but this command is the
most likely trigger of it.) If that in turn is unreadable, zgv gives up
in disgust and exits. :-)
.RE
.PP
.SH "CHANGING THE SORTING ORDER"
Normally, the files are listed in asciibetical order by name. However,
you can instead have the file list sorted by size, last-modified
date/time, or by `extension' (the file type).
.PP
(Only the order of files can be altered; directories are always listed
first, and always in name order.)
.PP
`\fBAlt-n\fR'
.RS
Sort by name. This is the default.
.PP
.RE
`\fBAlt-s\fR'
.RS
Sort by size. The biggest files are listed last.
.PP
.RE
`\fBAlt-d\fR'
.RS
.RE
`\fBAlt-t\fR'
.RS
Sort by last-modified date/time. The newest files are listed last.
.PP
.RE
`\fBAlt-e\fR'
.RS
Sort by extension.
.RE
.PP
.SH "FILE SELECTOR TOGGLES"
Various aspects of the file selector's behaviour can be configured while
zgv is running, by using these toggle commands (which enable the feature
if it was previously disabled, and vice versa).
.PP
These settings can also be altered using command-line options
(see \fBOptions\fR) and/or config file settings (see \fBConfiguring
zgv\fR).
.PP
`\fBv\fR'
.RS
Toggle display of thumbnails (default is on). The without-thumbnails
display can sometimes be useful for navigating around large directories
(many filenames are shown onscreen at once), and it is of course faster.
.PP
.RE
`\fBs\fR'
.RS
Toggle scrollbar on/off (default is on). The scrollbar shows which part
and which proportion of the list is currently being shown onscreen, and
when mouse support is enabled can be used to move around the list.
.PP
.RE
`\fBS\fR'
.RS
Toggle shuffling (randomising) of slideshows. See \fBSlideshows\fR.
.PP
.RE
`\fBL\fR'
.RS
Toggle looping in slideshows. See \fBSlideshows\fR.
.PP
.RE
`\fBAlt-m\fR'
.RS
Toggle use of `magic numbers' (identifiers at the start of a file) to
pick which files in a directory to list in the selector. The usual
method of doing this is based on the file's extension (see \fBFile Type
Identification\fR, which is much faster but won't catch e.g. files without
extensions.
.PP
.RE
`\fBc\fR'
.RS
If the file selector is running in 16-colour mode (it usually doesn't
unless zgv has no choice --- see \fB16-colour File Selector\fR), toggle
between greyscale (default) and colour thumbnails.
.RE
.PP
.SH "OTHER FILE SEL COMMANDS"
There are some other commands in the file selector which don't easily
fit anywhere else. Here they are:
.PP
`\fBDelete\fR'
.RS
Delete (only) the file the cursor is on. Asks for confirmation (unless
this is disabled, see \fBConfiguring zgv\fR). It also deletes the file's
thumbnail, if it has one. See \fBCopying/Moving/Deleting Files\fR, for a
more general command which deletes all tagged files.
.PP
.RE
`\fB:\fR'
.RS
Show various details about the file the cursor is on; the (full)
filename, the size in kilobytes, width/height if recorded in any
thumbnail, last-modified date, etc. You can also use the `\fB;\fR' key to
get this.
.PP
.RE
`\fBAlt-f\fR'
.RS
Show the number of (picture) files in the current directory, and the
number of tagged files (see \fBTagging\fR).
.PP
.RE
`\fB^L\fR'
.RS
.RE
`\fB^R\fR'
.RS
Rescan the directory contents, and redraw the screen.
.PP
.RE
`\fBK\fR'
.RS
Kill mouse --- disable mouse for the rest of this zgv session. (It
prompts to check if you really want to do so.) This can be useful if you
have the mouse enabled in a config file, so that zgv always starts up
with the mouse on, but you're currently using just the keyboard. In such
a situation the mouse pointer can be a bit annoying. This command lets
you disable the mouse completely for the current zgv process.
.RE
.PP
.SH "SHOWING MORE FILES"
The file selector normally runs at a relatively low resolution
(640x480), meaning it can only show 20 thumbnails at once. This keeps
the selector running at a reasonable speed even on slow machines.
.PP
If you have a faster machine, however, and your video card has
256-colour modes with higher resolutions than 640x480 (see \fBVideo
Modes\fR), you may want to see more thumbnails onscreen at once.
.PP
(zgv tends not to look as `right' in such modes as it does in the usual
640x480, but apart from that it's much the same.)
.PP
`\fBF1\fR'
.RS
Select 640x480 mode. This is the default.
.PP
.RE
`\fBF2\fR'
.RS
Select 800x600 mode.
.PP
.RE
`\fBF3\fR'
.RS
Select 1024x768 mode.
.PP
.RE
`\fBF4\fR'
.RS
Select 1280x1024 mode.
.RE
.PP
If you want to change the default mode used in the file selector, use
the \fIfs-start-mode\fR config file setting (see \fBConfiguring zgv\fR).
For example, to use 800x600 by default, you'd use \fIfs-start-mode
800 600 8\fR.
.PP
Note these modes are subject to the same checks as in the viewer --- in
particular, this means that the file selector obeys the viewer's
\fImode-good\fR, \fImode-bad\fR, etc. settings. See \fBConfig
Variables\fR.
.PP
Finally, if you have no 640x480 256-colour mode, or if
\fIforce-fs-16col\fR has been set, the 640x480 16-colour mode is all
that is available.
.PP
.SH "16-COLOUR FILE SELECTOR"
The file selector normally operates in a 256-colour mode (by default,
the 640x480 one). However, the original VGA cards didn't have this mode,
and SVGA cards not supported by svgalib won't have it as far as zgv is
concerned either.
.PP
For such cards, zgv supports a more limited and slower file selector
which works in 640x480 16-colour mode. It should be easy to tell which
zgv is using --- if thumbnails appear in monochrome rather than colour
(and the files are colour pictures ;-)) then it's running in 16-colour
mode. (Another hint is that 16-colour mode has an extra border around
the edge of the screen which 256-colour mode probably won't have.)
.PP
As you might imagine, having 240 fewer colours makes things difficult.
The default way of coping with this is the greyscale thumbnails (eleven
grey levels are used), which are reasonably fast and quite faithful to
the originals. If you'd prefer less accurate --- but colour ---
thumbnails (eight colours are used, with dithering and increased
contrast), you can press `\fBc\fR' to toggle between the two, or set zgv
up to default to using colour thumbnails instead with
\fIfs-16col-colour-thumbnails on\fR in a config file
(see \fBConfiguring zgv\fR).
.PP
(For those of you out there who have a 640x480 256-colour mode, but feel
you're missing out by not seeing this 16-colour file selector :-), you
can force zgv to use it by using the \fI--force-fs-16col\fR option.)
.PP
.SH "THE VIEWER"
When a picture is being shown onscreen, you're in the viewer. This
section describes what you can do while viewing the picture.
.PP
.SH "EXITING THE VIEWER"
Exiting the viewer is simple:
.PP
`\fBEsc\fR'
.RS
.RE
`\fBx\fR'
.RS
Exit the viewer.
.PP
If you got to the viewer from the file selector, you're returned there;
if you bypassed the file selector (by running zgv with a file (or files)
to view specified on the command-line --- see \fBOptions\fR) then
exiting the viewer also exits zgv.
.RE
.PP
.SH "BIG PICTURES"
A picture may well be too large to fit entirely on the screen. There are
two general ways to see the whole of the picture, and in addition to
those, you may be able to fit more on by choosing a different video mode
(see \fBVideo Modes\fR), either manually or by using auto-mode-fit.
.PP
(For multi-resolution Photo-CD files, there is yet another alternative
approach (see \fBSupported File Formats\fR).)
.PP
.SS "Scrolling"
Scrolling is the default approach to handling big pictures in zgv. When
the viewer is started up, the top-left of the picture is shown --- you
can use the cursor keys (and many others) to move around the rest of the
picture.
.PP
`\fBCursor Up\fR'
.RS
.RE
`\fBK\fR'
.RS
.RE
`\fBQ\fR'
.RS
Move up 100 pixels. `\fBk\fR' and `\fBq\fR' move up 10 pixels.
.PP
.RE
`\fBCursor Down\fR'
.RS
.RE
`\fBJ\fR'
.RS
.RE
`\fBA\fR'
.RS
Move down 100 pixels. `\fBj\fR' and `\fBa\fR' move down 10 pixels.
.PP
.RE
`\fBCursor Left\fR'
.RS
.RE
`\fBH\fR'
.RS
.RE
`\fBO\fR'
.RS
Move left 100 pixels. `\fBh\fR' and `\fBo\fR' move left 10 pixels.
.PP
.RE
`\fBCursor Right\fR'
.RS
.RE
`\fBL\fR'
.RS
.RE
`\fBP\fR'
.RS
Move right 100 pixels. `\fBl\fR' and `\fBp\fR' move right 10 pixels.
.PP
.RE
`\fBPage Up\fR'
.RS
.RE
`\fB^U\fR'
.RS
Move up (nearly) a screenful. (It moves 90% of the screen height.)
.PP
.RE
`\fBPage Down\fR'
.RS
.RE
`\fB^V\fR'
.RS
Move down (nearly) a screenful.
.PP
.RE
`\fB-\fR'
.RS
Move left (nearly) a screenful. (It moves 90% of the screen width.)
.PP
.RE
`\fB=\fR'
.RS
Move right (nearly) a screenful.
.PP
.RE
`\fBHome\fR'
.RS
.RE
`\fB^A\fR'
.RS
Move to the top-left of the picture.
.PP
.RE
`\fBEnd\fR'
.RS
.RE
`\fB^E\fR'
.RS
Move to the bottom-right of the picture.
.RE
.PP
.SS "Zoom Mode"
An alternative way of viewing the whole picture, one which lets you see
the picture onscreen all at once no matter how big (or small) it is, is
zoom mode.
.PP
Zoom mode's name derives from the idea of `zooming' a small file up to
fit the screen. But in reality, it is more often used to reduce a large
file to fit the screen.
.PP
Zoom mode is not the default, and has to be enabled. Once enabled, it
stays on until you turn it off again.
.PP
By default, the way zoom mode reduces a file to fit the screen is
(relatively) quick but harsh, and may make the picture look ugly.
Enabling \fIvkludge\fR smoothes the picture, giving a better and more
accurate result, but takes longer. It too is not the default, but stays
on until turned off again.
.PP
`\fBz\fR'
.RS
Toggle zoom mode.
.PP
.RE
`\fBAlt-r\fR'
.RS
When in zoom mode, only \fIreduce\fR pictures to fit. This can be
useful when going through a lot of unpredictably-sized pictures, as it
means that you can see all of a big picture easily without also meaning
that tiny little icons assume a scale of Biblical proportions. :-)
.PP
.RE
`\fBv\fR'
.RS
Toggle \fIvkludge\fR, which enables appropriate smoothing when zoom
mode is reducing a picture to fit the screen. It also enables similar
smoothing for non-zoomed pictures in 320x400x8 and 360x480x8 modes.
See \fBVirtual Modes\fR.
.PP
.RE
`\fBn\fR'
.RS
Resume `normal' display --- disables zoom mode (and scaling mode).
.RE
.PP
.SS "Auto-mode-fit"
If it seems strange to you to use scrolling or zoom mode to see the
whole picture when you could just use a different video mode (to change
the size of the pixels displayed onscreen), you may find auto-mode-fit
useful.
.PP
If enabled, and when a picture is loaded, the current mode is
automatically switched to the `smallest' mode which is both wider and
taller than the picture is (or of equal width/height). In other words,
the (theoretically) most appropriate mode. If no mode can fit the
picture onscreen, the `largest' mode is chosen.
.PP
Auto-mode-fit is not the default, so you have to enable it if you want
to use it.
.PP
`\fBZ\fR'
.RS
Toggle auto-mode-fit mode. Usually this only takes effect when a picture
is loaded (so that manual mode switching still works), but when you
enable it zgv does a one-off auto-mode-fit on the current picture. (Note
also that disabling it leaves you in the current mode, so that has no
obvious effect; for this reason, the picture is redrawn (as a visual cue
that you haven't just been ignored :-)).)
.RE
.PP
I should point out that all the mode-switching can be a bit hard on your
monitor, so even if you really like this option you might not want to
enable it all the time (e.g. in a config file), but instead only turn it
on when you `need' it. Still, it's up to you.
.PP
Certain modes are excluded from those chosen by auto-mode-fit. In
particular, no 320x200 mode is ever chosen, nor is 320x400x8. These
exceptions are made due to the unusual aspect ratio. 640x480x4 is
excluded due to the slightly odd way it works, which makes it ill-suited
to automatic selection. 360x480x8 \fIis\fR considered, despite the
aspect ratio, if no 640x480x8 mode exists.
.PP
.SH "SCALING"
You can scale a picture --- this makes it appear larger onscreen. zgv
acts exactly as if the scaled-up picture were the real picture; for
example, the cursors scroll around in steps of 100 scaled-up pixels,
even if this means moving a fraction of a pixel in the original picture.
.PP
The main limitation of scaling is that you can only scale up by integer
values, so you can only make each pixel in the image twice as wide/high, or
three times as wide/high, or four times, and so on.
.PP
(It may seem odd saying e.g. `twice as wide/high' rather than `twice the
size', but technically `twice the size' would be referring to scaling up
the width (and height) by about 1.414...)
.PP
Normally, zgv does no scaling, which could be considered a ratio of 1:1.
Scaling up increases that ratio. How it is increased depends on which
key you use:
.PP
`\fBs\fR'
.RS
Increase the ratio by adding one --- this leads to ratios of 2:1, 3:1,
4:1...
.PP
.RE
`\fBd\fR'
.RS
Increase the ratio by doubling it --- leads to ratios of 2:1, 4:1,
8:1...
.RE
.PP
Usually `\fBd\fR' is more useful.
.PP
There are similar commands to decrease the ratio (when it reaches 1:1
scaling is disabled):
.PP
`\fBS\fR'
.RS
Decrease the ratio by subtracting one.
.PP
.RE
`\fBD\fR'
.RS
Decrease the ratio by halving it.
.RE
.PP
The scaling ratio is never decreased below 1:1. It is also never
increased beyond 512:1, where zgv stops so that pixels may be conserved
for future generations. :-)
.PP
You can undo the effect of scaling at any time by using `\fBn\fR' (which
also disables zoom mode).
.PP
Normally, scaling works by simply making the pixels into larger and
larger squares (in effect), which remain the same colour. However, if
you are using a 15/16/24/32-bit mode (see \fBVideo Modes\fR), you can
enable a feature called `interpolation' which smoothly graduates the
colour change between the top-left corners of each pixel. This is
\fIvery\fR slow, but looks nice.
.PP
`\fBi\fR'
.RS
Toggle interpolation in scaling mode.
.PP
.RE
`\fB!\fR'
.RS
Toggle off-by-one interpolation (disabled by default). Using this
off-by-one method gives incorrect results, but this can occasionally be
useful at ratios of 2:1 and 3:1 for relatively low-quality JPEGs.
.RE
.PP
(If you like the appearance of scaling with interpolation, you may also
be interested in a program I wrote called \fIpnminterp\fR, which can
scale up a PGM or PPM file while applying this effect.)
.PP
.SH "MIRROR AND ROTATE"
Sometimes when viewing a picture you will want to flip it horizontally
or vertically, or rotate it:
.PP
`\fBm\fR'
.RS
`Mirror' the picture (flip it horizontally).
.PP
.RE
`\fBf\fR'
.RS
`Flip' the picture (flip it vertically).
.PP
.RE
`\fBr\fR'
.RS
Rotate the picture 90 degrees clockwise.
.PP
.RE
`\fBR\fR'
.RS
Rotate the picture 90 degrees anti-clockwise. (This is a little slower
as it works by effectively doing `\fBr\fR' then `\fBf\fR' then `\fBm\fR'.)
.PP
.RE
`\fBAlt-n\fR'
.RS
Restore the picture orientation to normal. This undoes the effect of any
mirrors, flips, and/or rotations.
.RE
.PP
zgv normally reverts the picture orientation (the way the picture has
been transformed by mirror/flip/rotate) back to normal when you view a
new picture. However, there are various ways you can retain the
orientation between pictures, so that the new picture is mirrored,
flipped, and/or rotated in the same way. Here are two of the ways:
.PP
`\fBAlt-o\fR'
.RS
Re-use the previous picture's orientation for this picture.
.PP
.RE
`\fBAlt-s\fR'
.RS
Save the current picture orientation, making all pictures viewed until
you press `\fBEsc\fR' use it. (The orientation reverts to normal after
that, though.)
.RE
.PP
Finally, you can choose to have the orientation preserved the whole
time. To do this, put \fIrevert-orient off\fR in a config file
(see \fBConfiguring zgv\fR).
.PP
.SH "BRIGHTNESS AND CONTRAST"
zgv provides support for changing brightness and contrast in all modes,
though it does slow things down a little in 15/16/24/32-bit modes
(see \fBVideo Modes\fR).
.PP
`\fB,\fR'
.RS
Decrease contrast.
.PP
.RE
`\fB.\fR'
.RS
Increase contrast.
.PP
.RE
`\fB<\fR'
.RS
Decrease brightness.
.PP
.RE
`\fB>\fR'
.RS
Increase brightness.
.PP
.RE
`\fB;\fR'
.RS
Reset contrast and brightness to normal. (`\fB*\fR' is also supported, for
hysterical raisins.)
.RE
.PP
Any contrast change is applied before any brightness change by default.
However, you can reverse the order easily enough:
.PP
`\fBB\fR'
.RS
Reverse the order in which brightness and contrast are applied.
.RE
.PP
The order they're applied in does make a difference --- assuming you've
modified both brightness and contrast, of course. :-) The normal order
simply means you have a increased-contrast image which you change the
brightness of. Obviously then, the reverse order reverses this, but it
has the additional effect of changing the point around which contrast is
applied.
.PP
.SH "GAMMA ADJUSTMENT"
Ah yes, gamma. What fun. The basic problem is this --- differing
displays have differing intensity response curves. ``This has made a lot
of people very angry and been widely regarded as a bad move.'' :-)
.PP
It means that you need some way of adjusting how brightly you display
the picture to compensate. But since we're dealing with response curves,
this isn't just a matter of changing the brightness in a linear fashion.
.PP
That doesn't seem so hard to deal with, right? All you need is to get
the gamma (a number which specifies how much the curve bends) for the
image, and for the screen, divide one by the other and adjust as
appropriate. Joy.
.PP
But, given that the problem has existed since we started displaying more
than eight colours, you won't be surprised to find that it's already
been fixed. And the fixes all tend to clash, and everybody has a
different notion of how to fix it. The usual `fix' is to assume that
whoever made the image made it with a gamma matching the gamma of your
display, so you can just stuff the bits right on the screen. Since this
is easy, it's the most widespread approach. But it's a bit stupid, so
not everyone does it. Combine that with the lack of gamma specification
in most image formats, and the often-bogus values specified by people in
those that do, and hey presto --- the image gamma could be just about
anything. And the screen's gamma also tends not to be easily determined.
.PP
So how on earth do you deal with something like \fIthat\fR in a
remotely sane fashion?
.PP
The answer chosen in zgv is to just live with the fact that the
probability of automatically obtaining correct values for both the
screen and image gamma is basically zero. Once you accept that, the
sensible thing to do is to make it \fIvery\fR easy and fast to change
gamma adjustment to commonly-required values. So here's how to do it:
.PP
`\fB1\fR'
.RS
Set gamma adjustment to 1.0, i.e. no adjustment. This is the default
setting.
.PP
.RE
`\fB2\fR'
.RS
Set gamma adjustment to 2.2. This is useful for viewing linear-gamma
files (one classic example being raytracer output) on an average PC
monitor.
.PP
.RE
`\fB3\fR'
.RS
Set gamma adjustment to 1 divided by 2.2, i.e. roughly 0.45. This is
useful for the reverse --- viewing average-PC-monitor-gamma files on a
linear-gamma display. Historically I believe the classic example would
have been viewing PC files on a Mac, but I don't know how true that is
these days.
.PP
.RE
`\fB4\fR'
.RS
Set gamma adjustment to its initial value, as specified by a `\fB-G\fR'
command-line option (see \fBOptions\fR) or \fIgamma\fR config file
setting (see \fBConfiguring zgv\fR). The default value used if none was
specified is 1.0.
.RE
.PP
A brief clarification is probably in order. The gamma adjustment value
which you set in zgv is actually inverted from (i.e. one divided by) the
true adjustment value used. This is (believe it or not :-)) intended to
avoid confusion by reflecting the fact that \fIscreen\fR gamma is the
one most widely considered/well known.
.PP
You can also tweak the adjustment more precisely, in a similar way to
brightness/contrast:
.PP
`\fBAlt-,\fR'
.RS
Decrease gamma adjustment (divide it by 1.05).
.PP
.RE
`\fBAlt-.\fR'
.RS
Increase gamma adjustment (multiply it by 1.05).
.RE
.PP
Note that `\fB;\fR', and the other keys which reset the
brightness/contrast, deliberately avoid resetting the gamma adjustment.
.PP
.SH "INCREASED GREYSCALES"
zgv normally displays greyscale pictures in 8-bit modes (see \fBVideo
Modes\fR). Due to a limitation of the original VGA cards, these can have a
maximum of 64 greyscales. This can give noticeable `edges' in some
pictures.
.PP
So when using 8-bit video modes, zgv uses some trickery to try and
increase the apparent colour depth a little. The trick zgv uses is to
increase one or two of the red/green/blue channels by one, giving a
coloured `pseudo-grey'. Since the eye is more sensitive to brightness
than colour, this is reasonably convincing under normal conditions. (It
can get less convincing if you scale up the picture, but it usually
looks reasonable even then.)
.PP
A slightly more unusual use of this technique in zgv, though, is that
it carries on using it for colour 8-bit images. I'm not certain how
valid this is; the `sub-depth' value is calculated as a greyscale, and
the channels altered are the same, with no consideration given to how
this might affect the colour balance.
.PP
However, the difference this feature makes is very slight. The image
will probably be very, very slightly brighter than it would be
otherwise, and possibly a little `warmer' because of the minor use of
colour and the eye's green/red bias (I think).
.PP
You can toggle this feature in the viewer:
.PP
`\fBG\fR'
.RS
Toggle whether to fake some extra greyscales/colours in 8-bit modes.
.RE
.PP
To disable it by default, put \fIfake-cols off\fR in a config file
(see \fBConfiguring zgv\fR).
.PP
.SH "CHANGING PICTURE"
While in the viewer, it's possible to go directly to the previous or
next file in the directory without having to exit to the file selector
and pick the relevant file by hand.
.PP
There are two ways to do this; one way leaves the old picture onscreen
until the new one is read in, the other (on `\fB^P\fR' and `\fB^N\fR')
temporarily returns to the file selector and shows the usual progress
indicator while it's being read.
.PP
In addition, one of the next-file-in-dir commands lets you tag the file
currently being viewed first, without having to return to the file
selector to do it.
.PP
Note that the meanings of the commands change when you are viewing a
slideshow; the details are covered below.
.PP
(See \fBDialog Boxes\fR, to see what `\fBBackspace\fR' is being used to mean
here.)
.PP
`\fBBackspace\fR'
.RS
View previous file in dir, without progress indicator. (In slideshow,
move to next file without waiting.)
.PP
.RE
`\fBEnter\fR'
.RS
View next file in dir, without progress indicator. (In slideshow, move
to next file without waiting.)
.PP
.RE
`\fBSpace\fR'
.RS
Tag current file, then view next file in dir, without progress
indicator. (In slideshow, move to next file without waiting; it has no
tagging effect during a slideshow.)
.PP
.RE
`\fB^P\fR'
.RS
View previous file in dir, with progress indicator. (In slideshow, acts
like `\fBEsc\fR'.)
.PP
.RE
`\fB^N\fR'
.RS
View next file in dir, with progress indicator. (In slideshow, acts
like `\fBEsc\fR'.)
.PP
.RE
.PP
Note that `\fBSpace\fR' tags the file, rather than toggling the tag status
as it does in the file selector. This mismatch is unfortunate, but in
the viewer context the always-tag function is more likely to be what
you'd want, since you can't see the file selector to see which files are
tagged.
.PP
.SH "FILE DETAILS"
While you can get file details when in the file selector, you can't
always get to the selector --- for example, you might be running zgv on
a single image from the command-line, or using it in that way from
another program (such as lynx). So zgv can also report file details when
in the viewer:
.PP
`\fB:\fR'
.RS
Show file details, including such things as the filename, size, and
width/height. This is almost identical to the equivalent command in the
selector (see \fBOther File Sel Commands\fR); the only difference is that
you can't use `\fB;\fR' to get this in the viewer, and the viewer doesn't
depend on thumbnails for the width/height info.
.RE
.PP
.SH "PAUSING SLIDESHOWS"
Sometimes you may want to temporarily stop a slideshow, when you get to
an interesting image. You can do this the same way you would temporarily
stop terminal output:
.PP
`\fB^S\fR'
.RS
Pause slideshow, leaving you on the current image until you resume. You
can still abort early with `\fBEsc\fR', go to the next image with
`\fBEnter\fR', or in fact use any viewer commands at all.
.PP
.RE
`\fB^Q\fR'
.RS
Resume slideshow. If the timer has already run out (it keeps running
while paused), this will go straight to the next image without any
further delay, other than that needed to read the new picture.
.RE
.PP
The analogy with XON/XOFF isn't really that close --- for example, it's
worth noting that when the slideshow is `paused', you can actually do
anything you normally might in the viewer.
.PP
.SH "MULTIPLE-IMAGE GIF ANIMATION"
While zgv is for the most part a straightforward viewer, it has special
support for multiple-image animated GIF files. These are loaded as a
`column' of images, one on top of the other --- this column is the
single image which is then displayed, enabling you to see all the
`frames' of the GIF. (Though not in an image thumbnail; in those, only
the first image is shown.)
.PP
You can also switch to an `animation' mode in the viewer, where each
`frame' is shown one after the other, with (roughly) the delay specified
in the GIF between updates.
.PP
(This animation mode is automatically enabled if you start zgv with the
`\fB-A\fR' or `\fB--auto-animate\fR' command-line option. See \fBInvoking
zgv\fR.)
.PP
`\fBe\fR'
.RS
Enter animation mode. (I don't know what the `\fBe\fR' stands for either.
:-)) In this mode the normal viewer keys have no effect, and instead, a
more limited set of keys are supported:
.PP
.RE
`\fBEsc\fR'
.RS
.RE
`\fBx\fR'
.RS
Stop the animation and return to the viewer. If auto-animation mode is
enabled, it exits the viewer too.
.PP
.RE
`\fBp\fR'
.RS
Pause (or unpause) the animation.
.PP
.RE
`\fBn\fR'
.RS
Skip to the next frame. Generally only useful when paused.
.RE
.PP
If auto-animation is enabled, the `\fBBackspace\fR', `\fBEnter\fR', and
`\fBSpace\fR' keys do the same as they do in the normal viewer
(see \fBChanging Picture\fR). Otherwise they act the same as `\fBEsc\fR'.
.PP
.SH "VIDEO MODES"
zgv can display pictures in a wide variety of different video modes.
While you can kind of get by in zgv without knowing anything about video
modes, they have a very direct impact on how the picture appears, and
it's important to know why to understand just how zgv works and how best
to use zgv.
.PP
.SS "What a Video Mode is"
A video mode is essentially a certain way of displaying dots on the
screen. The important aspects of a video mode in zgv are the number of
dots (or `pixels') that can be shown horizontally and vertically in the
mode, and the number of colours that the mode can handle simultaneously
(also called the `depth' of the mode).
.PP
In fact, this is how a video mode is usually referred to. One might talk
of a 640x480 256-colour mode, for example; This would have 640 pixels
from left to right, and 480 from top to bottom, with no more than 256
colours on the screen at once.
.PP
A variant notation \fIwidth\fRx\fIheight\fRx\fIdepth\fR is often used by
zgv and this documentation. But here the `depth' is given in bits. This
usage, while compact, probably makes more sense to programmers than to
anyone else. Here's a list showing which `bit depths' match which number
of colours:
.PP
(These are the only bit depths relevant to zgv.)
.PP
\fB-\fR 
4-bit means 16 colours.
.PP
\fB-\fR 
8-bit means 256 colours.
.PP
\fB-\fR 
15-bit means 32768 colours.
.PP
\fB-\fR 
16-bit means 65536 colours.
.PP
\fB-\fR 
24-bit means 16777216 colours (over 16 million).
.PP
\fB-\fR 
32-bit means 16777216 colours too (!), since only 24 of the 32 bits are
used for display purposes.
.RE
.PP
From the number of colours available in the latter modes, you can see
why a bit depth notation is so useful!
.PP
So, in the \fIwidth\fRx\fIheight\fRx\fIdepth\fR notation, our 640x480
256-colour mode would be 640x480x8, a 16-colour mode of the same size
would be 640x480x4, and an equivalent `true-colour' (24-bit) mode would
be 640x480x24.
.PP
Whenever you see a mode referred to as \fIx\fRx\fIy\fRx\fIz\fR in zgv or
in this documentation, it is \fBalways\fR specifying a video mode in
this notation.
.PP
.SS "Video Mode Issues"
The obvious implication of differing video modes is that modes with more
pixels horizontally and vertically will have smaller pixels, and so be
able to show more of large pictures. The reverse (bigger pixels, making
small pictures appear large) is not as important a consideration, as zgv
can achieve much the same effect with scaling (see \fBScaling\fR). Using
video modes to do it is faster, but usually less convenient.
.PP
A more subtle, but much more important, implication of differing modes
is related to the colour depth. More precisely, it's due to the
differing ways the actual colours shown onscreen are obtained. In 15,
16, and 24/32-bit modes, the colour is specified `directly'; in 8-bit
modes, a pixel's `colour' is really a number which selects one of 256
different colours to show. The overhead of translating from 8-bit to
15/16/24/32-bit is relatively minor, but in the 15/16/24/32-bit to 8-bit
direction, it's considerable.
.PP
For this reason, and since converting from 24-bit to 15/16/32-bit is
very easy, when zgv reads a picture it stores it in memory in one of two
internal formats --- either as 8-bit, or as 24-bit. See \fBFile Format
Depths\fR, for discussion on which format zgv uses for which files.
.PP
But what difference does all this make when you're using zgv? Well,
here's the bottom line:
.PP
\fBo\fR 
A file loaded as 8-bit can only ever display in 8-bit modes. Trying to
choose a 15/16/24/32-bit mode will have no effect.
.PP
\fBo\fR 
A file loaded as 24-bit will only display in 15/16/24/32-bit modes,
unless you have \fIno\fR 15/16/24/32-bit modes, in which case it will
be dithered when it is read in. (But the config file setting
\fIforce-viewer-8bit\fR can be enabled to force the dithering
behaviour. See \fBConfiguring zgv\fR.)
.PP
\fBo\fR 
zgv normally remembers the last mode you switched to (the initial mode
is usually 640x480x8), and keeps using that until you specify another to
use. However, it will automatically choose the most similar
15/16/24/32-bit mode for a 24-bit file if the last mode was 8-bit, and
vice versa.
.RE
.PP
Confused? Head hurting? Don't worry, it happens to the best of us.
Especially where zgv is concerned. :-) Just play around with zgv for a
while, and come back to this later on. It may make more sense after
you've got a feel for what's going on.
.PP
.SS "Default Video Mode"
zgv using the last mode you selected is all very well, but that doesn't
explain what happens if you've not chosen one. What happens is that it
uses the default video mode.
.PP
The default mode is (unless you change it) the 640x480x8 mode. If this
is not available or has been disabled, zgv defaults to 360x480x8 --- if
this in turn is not available or has been disabled, it uses 320x200x8.
.PP
.SS "Selecting a Video Mode"
There are many different video modes supported by svgalib, and zgv lets
you use most of them. To do so, it reserves many different keys for
selecting video modes. These largely fall into four groups:
.PP
\fB-\fR 
The original VGA modes. These are on the number keys for historical
reasons. (The reason being, the number keys exactly matched the mode
numbers used by the old VGAlib.)
.PP
\fB-\fR 
The first group of SVGA modes. These are on the function keys `\fBF1\fR'
to `\fBF10\fR'. These are generally the first modes to try, if you have
them.
.PP
\fB-\fR 
The second group of SVGA modes. These are on the shifted function keys,
here represented as `\fBSF1\fR', `\fBSF2\fR', and so on. (The first two of
these are also available on `\fBF11\fR' and `\fBF12\fR'.) Not all of the
shifted function keys are currently used by zgv.
.PP
\fB-\fR 
The third group of SVGA modes. These are again on unshifted function
keys, but you must press `\fBTab\fR' before pressing the function key ---
i.e. press `\fBTab\fR', let go, then press the function key. These are
shown below as `\fBTab-F1\fR', `\fBTab-F2\fR', etc.
.PP
.RE
.PP
There are also the `\fB[\fR' and `\fB]\fR' keys, which select the next
smaller/bigger mode. These are especially useful if you don't happen to
have a spare lifetime in which to learn the `normal' mode-selecting
keys. :-)
.PP
So, here's the list of mode-related commands:
.PP
`\fB/\fR'
.RS
List which key combination selects which video mode.
.PP
.RE
`\fB[\fR'
.RS
Select the next smaller (lower-res) mode.
.PP
.RE
`\fB]\fR'
.RS
Select the next bigger (higher-res) mode. Both these mode-changing keys
have the limits on modes selected that auto-mode-fit has
(see \fBAuto-mode-fit\fR).
.PP
.RE
`\fB0\fR'
.RS
Select 640x480x4 mode. This emulates an 8-bit mode. See \fBThe Viewer
640x480x4 Mode\fR.
.PP
.RE
`\fB5\fR'
.RS
Select 320x200x8 mode.
.PP
.RE
`\fB6\fR'
.RS
Select 320x240x8 mode.
.PP
.RE
`\fB^\fR'
.RS
Select 320x240x24 mode. (`\fB^\fR' is often on shift-6.)
.PP
.RE
`\fB7\fR'
.RS
Select 320x400x8 mode. This emulates a 640x400 mode. See \fBVirtual
Modes\fR.
.PP
.RE
`\fB8\fR'
.RS
Select 360x480x8 mode. This emulates a 720x480 mode. See \fBVirtual
Modes\fR.
.PP
.RE
`\fBF1\fR'
.RS
Select 640x480x8 mode.
.PP
.RE
`\fBF2\fR'
.RS
Select 800x600x8 mode.
.PP
.RE
`\fBF3\fR'
.RS
Select 1024x768x8 mode.
.PP
.RE
`\fBF4\fR'
.RS
Select 1280x1024x8 mode.
.PP
.RE
`\fBF5\fR'
.RS
Select 320x200x15 mode.
.PP
.RE
`\fBF6\fR'
.RS
Select 320x200x16 mode.
.PP
.RE
`\fBF7\fR'
.RS
Select 320x200x24 mode.
.PP
.RE
`\fBF8\fR'
.RS
Select 640x480x15 mode.
.PP
.RE
`\fBF9\fR'
.RS
Select 640x480x16 mode.
.PP
.RE
`\fBF10\fR'
.RS
Select 640x480x24 mode.
.PP
.RE
`\fBSF1\fR'
.RS
.RE
`\fBF11\fR'
.RS
Select 800x600x15 mode.
.PP
.RE
`\fBSF2\fR'
.RS
.RE
`\fBF12\fR'
.RS
Select 800x600x16 mode.
.PP
.RE
`\fBSF3\fR'
.RS
Select 800x600x24 mode.
.PP
.RE
`\fBSF4\fR'
.RS
Select 1024x768x15 mode.
.PP
.RE
`\fBSF5\fR'
.RS
Select 1024x768x16 mode.
.PP
.RE
`\fBSF6\fR'
.RS
Select 1024x768x24 mode.
.PP
.RE
`\fBSF7\fR'
.RS
Select 1280x1024x15 mode.
.PP
.RE
`\fBSF8\fR'
.RS
Select 1280x1024x16 mode.
.PP
.RE
`\fBTab-F1\fR'
.RS
Select 1280x1024x24 mode.
.PP
.RE
`\fBTab-F2\fR'
.RS
Select 1152x864x8 mode.
.PP
.RE
`\fBTab-F3\fR'
.RS
Select 1152x864x15 mode.
.PP
.RE
`\fBTab-F4\fR'
.RS
Select 1152x864x16 mode.
.PP
.RE
`\fBTab-F5\fR'
.RS
Select 1152x864x24 mode.
.PP
.RE
`\fBTab-F6\fR'
.RS
Select 1600x1200x8 mode.
.PP
.RE
`\fBTab-F7\fR'
.RS
Select 1600x1200x15 mode.
.PP
.RE
`\fBTab-F8\fR'
.RS
Select 1600x1200x16 mode.
.PP
.RE
`\fBTab-F9\fR'
.RS
Select 1600x1200x24 mode.
.PP
.RE
.PP
.SS "Special Modes"
Normally, each pixel in the image is written more-or-less directly to
the screen from zgv's internal copy of the picture (unless zoom mode
and/or scaling have been enabled). However, there are three modes where
zgv does things differently to make the modes more useful.
.PP
(These are mainly intended for users with only the original VGA modes
available.)
.PP
.SS "Virtual Modes"
The original VGA hardware only had one `official' 256-colour mode, the
320x200 one. But it could be reprogrammed to allow other useful modes
(known as `mode-X' modes) --- the ones svgalib provides are 320x240,
320x400, and 360x480.
.PP
These modes are available on all VGA cards. However, it's possible
(perhaps even likely?) that some non-CRT displays may not be able to
cope with them. All monitors should, though, even ordinary VGA monitors.
.PP
Now, while 320x240 is a nice sensible mode and can be used directly,
320x400 and 360x480 have very wide pixels. To deal with this, in these
latter modes zgv maps every two pixels horizontally to one pixel
onscreen. (Hence `virtual modes' --- physically they are 320x400 and
360x480, but in zgv they are virtual 640x400 and 720x480 modes.) This
means that you still get a reasonable aspect ratio, one similar to
(though not quite the same as) most other modes.
.PP
This raises the question of how this mapping is done. The normal
approach is the quickest, but is very crude --- zgv simply uses the
leftmost pixel of the two, and completely ignores the rightmost one. But
if \fIvkludge\fR mode is enabled (see \fBZoom Mode\fR), zgv will average
the pixels' colours together and use the closest match available in the
picture's palette. This usually gives a better result, but is
considerably slower.
.PP
.SS "The Viewer 640x480x4 Mode"
As well as the non-standard VGA modes, zgv allows you to use the
640x480x4 (16-colour) VGA mode as if it were an 8-bit mode. (Pressing
`\fB0\fR' selects this mode.) As with the file selector's 16-colour mode,
it can work either in greyscale (the default) or in colour.
.PP
`\fBc\fR'
.RS
If in 640x480x4 mode, toggle between greyscale and colour.
.RE
.PP
In greyscale mode, the picture is displayed using 16 greyscale levels
dithered to give the appearance of 61. In colour mode, the picture is
dithered to eight colours. (It's difficult to use all 16 colours
effectively for a colour dither without slowing things down.)
.PP
The greyscale uses an ordered (pattern-based) dither. The colour uses
ordered dithering by default too, which is fast but pretty rough. If
you'd prefer to sacrifice speed for better dithering, you can switch to
error-diffused dithering by putting `dither-16col-fast' in a config file
(see \fBConfig Files\fR), or you can toggle the setting interactively:
.PP
`\fBAlt-c\fR'
.RS
If in 640x480x4 mode and using colour dithering, toggle between ordered
and error-diffused dither.
.RE
.PP
All the features which work in 8-bit modes work in the 4-bit mode.
.PP
.SS "Drawbacks of 15/16-bit Modes"
Since 15 and 16-bit video modes do not have quite the same
representation (and depth) that a file loaded as 24-bit does, there are
some drawbacks to using them. Firstly, the image is converted to the
2-byte-per-pixel format as it is drawn (see \fBVideo Mode Issues\fR, for
the reason why zgv works this way); and secondly, the modes actually
have less colour depth than 256-colour modes.
.PP
In explanation of that last point; although 15 and 16-bit video modes
show many colours onscreen at once, there are fewer colours to choose
from.
.PP
A good way to illustrate this point is by considering the number of
greyscales each mode can display. In a 256-colour video mode, only 64
greys can be shown, since an 18-bit palette is used --- 2^(18/3) = 64.
But with a 15-bit video mode, even fewer can be shown --- 2^(15/3) = 32.
Because of the way that 16-bit video modes work, which is by providing
the green channel with twice as much colour depth (i.e. an extra bit),
they too can only show 32 greys. Put another way, 2^int(16/3) = 32. (Of
course, 24/32-bit modes will show all 256 greyscales.)
.PP
One way to gain some illusion of extra colours in these modes is to
use dithering, based on the colour detail ``below'' the level which
can be shown directly:
.PP
`\fBF\fR'
.RS
Toggle whether to use dithering in 15/16-bit modes. This makes picture
display considerably slower when used.
.RE
.PP
To enable this by default, put \fIdither-hicol on\fR in a config file
(see \fBConfiguring zgv\fR).
.PP
.SS "32-bit Video Modes"
One oddity in mode-land is the 32-bit mode. Like 24-bit modes, 32-bit
modes can display over 16 million colours. But there are no obvious
advantages to using 32-bit modes, at least as far as zgv is concerned.
So why does it support them?
.PP
Simply put, some SVGA hardware provides 32-bit modes without providing
equivalent 24-bit ones. Hence zgv's support for them.
.PP
That should also explain why zgv treats them the way it does. Here's how
it all works:
.PP
\fBo\fR 
When using zgv, you don't select a 32-bit mode directly. Instead, you
select a 24-bit mode --- and if no matching 24-bit mode exists, but a
matching 32-bit one \fIdoes\fR, zgv sneakily uses the 32-bit one behind
your back. :-)
.PP
\fBo\fR 
zgv's `choose most similar mode' code prefers 24-bit modes to 32-bit
ones, but similarly, if it has the 32-bit mode without the 24-bit one,
it'll take the smoke-and-mirrors route.
.PP
\fBo\fR 
As an exception to the overall rule, when specifying modes on the
command-line or in the config file, you \fIdo\fR need to explicitly
specify a 32-bit mode in order to get one.
.RE
.PP
For the most part you needn't worry about 32-bit modes, though; you can
just ignore them and think in terms of 8/15/16/24-bit modes and you'll
be ok.
.PP
.SS "Disabling Video Modes"
In some situations you might want to disable certain video modes. For
example, perhaps your video card supports modes which your monitor
cannot display; clearly you would want to disable these, as zgv only
knows about your video card.
.PP
(To be fair though, if you have svgalib configured correctly for your
monitor, this should never be a problem. See the \fIlibvga.config(5)\fR
man page for details.)
.PP
To disable video modes, you should give appropriate \fImode-bad\fR
entries in a config file (preferably \fI/usr/local/etc/zgv.conf\fR
for such system-wide configuration). See \fBConfig Variables\fR, for
details.
.PP
You could also do \fImode-all-bad\fR then enable a few modes with
\fImode-good\fR entries --- but most cards support so many video modes
that the \fImode-bad\fR approach is usually the right one.
.PP
.SH "XZGV COMPATIBILITY"
You may well want to skip this section if you don't use xzgv.
.PP
Some time after first writing zgv, I decided to do a port/rewrite for X,
called `xzgv'. Since I started this about six years after originally
writing zgv, it's understandable that I chose to do some things slightly
differently. :-)
.PP
The main difference, other than the obvious difference in appearance, is
that a few of the keys used differ. This can be a pain if you primarily
use xzgv, but use zgv every so often (or vice versa). To avoid this
problem, zgv supports an `xzgv-keys' mode, enabled by putting
\fIxzgv-keys on\fR in a config file (see \fBConfig Files\fR). This enables
an overriding routine which interprets xzgv-like keys to `native' zgv
ones --- in practice, the effect is of some xzgv keys being added,
overriding any conflicting zgv ones.
.PP
So, if you enable xzgv-keys, there are these differences in/additions to
the selector:
.PP
`\fBSpace\fR'
.RS
View a picture file, or if the cursor is on a subdirectory, make that
the current directory. (Like the native `\fBEnter\fR', which still works.)
.PP
.RE
`\fB-\fR'
.RS
Untag file.
.PP
.RE
`\fB=\fR'
.RS
Tag file.
.PP
.RE
`\fBAlt -\fR'
.RS
(i.e. Alt-minus) Untag all files.
.PP
.RE
`\fBAlt =\fR'
.RS
(i.e. Alt-equals) Tag all files.
.PP
.RE
`\fBCtrl-n\fR'
.RS
Rename file.
.PP
.RE
`\fBCtrl-d\fR'
.RS
Delete file.
.PP
.RE
`\fBq\fR'
.RS
.RE
`\fBCtrl-q\fR'
.RS
Exit zgv.
.RE
.PP
Note that there is no replacement for the usual zgv meaning of
`\fBSpace\fR'; that is, in xzgv-keys mode, there is (currently) no key
which lets you toggle a file's tag state. (This will change if/when I
add such a key to xzgv. :-))
.PP
In the viewer, there are these changes:
.PP
`\fBb\fR'
.RS
View previous file in dir.
.PP
.RE
`\fBSpace\fR'
.RS
View next file in dir.
.PP
.RE
`\fBCtrl-Space\fR'
.RS
Tag current file, then view next file in dir.
.PP
(In short, `\fBb\fR'/`\fBSpace\fR'/`\fBCtrl-Space\fR' act like the native
`\fBBackspace\fR'/`\fBEnter\fR'/`\fBSpace\fR'. The same mappings also apply
when animating a multiple-image GIF file (see \fBMultiple-image GIF
Animation\fR).)
.PP
.RE
`\fBCtrl-w\fR'
.RS
Exit viewer (i.e. `close file').
.PP
.RE
`\fBN\fR'
.RS
Restore the picture orientation to normal. This undoes the effect of any
mirrors, flips, and/or rotations. (Like the native `\fBAlt-n\fR'.)
.RE
.PP
There are some omissions in the viewer's xzgv-ish keys:
.PP
\fB-\fR 
The `\fBCtrl\fR' + cursor-key alternatives to
`\fBh\fR'/`\fBj\fR'/`\fBk\fR'/`\fBl\fR' don't exist, as these can't be
distinguished from `normal' cursors given the way zgv reads keys.
.PP
\fB-\fR 
The alternative `\fBShift\fR' + cursor-key means of paging
up/down/left/right is similarly missing.
.PP
\fB-\fR 
Supporting `\fBCtrl-q\fR' would have got in the way of slideshow pausing,
so I decided against it, and omitted `\fBq\fR' from the viewer for some
sort of consistency.
.PP
\fB-\fR 
Supporting `\fBTab\fR' would break selecting some video modes, and
probably would have seemed a bit surreal in zgv anyway. :-)
.RE
.PP
That about wraps it up for the keys... but, of course, there
\fIare\fR other interface differences.
.PP
One is the way zgv has `flat' mouse menus for the selector/viewer, while
xzgv has hierarchical ones. That would be nice to replicate, but I don't
think I'm likely to.
.PP
A more dramatic difference (IMHO) is the way moving around the picture
with the mouse works. In zgv, you move the screen around `over' the
picture, with a fixed amount of mouse movement needed to cover any
picture size. In xzgv, you move the picture around `under' the window,
with the mouse movement needed being proportional to the picture size
(this follows from the picture directly mimicking the mouse pointer's
movement). The most obvious problem here is that moving the mouse right
on zgv is like pressing cursor-right, while doing the same in xzgv is
like pressing cursor-left. Now, I \fImay\fR eventually add an option to
reverse zgv's reaction to mouse movement, but `fixing' the
non-proportionality without a pointer onscreen might seem awfully
strange.
.PP
Hmm. An interesting problem to tackle at some point, I suppose. :-)
.PP
.SH "FILE FORMATS"
Picture files are stored in a variety of different forms. These forms
are usually called `file formats'. zgv supports several.
.PP
.SH "FILE TYPE IDENTIFICATION"
The format a file is in is identified in two different ways. The file
selector (by default) picks filenames to display based on the
`extension' --- for instance, if a filename ends in \fI.jpg\fR or
.cc @
\fI.jpeg\fR, zgv assumes it is a JPEG. This way of working is not
@cc .
always right, but it's much faster than the alternative (reading part of
every single file) and is usually sufficient. (If it's not, you can
enable slower `magic number'-based identification with `\fBAlt-m\fR'
(see \fBFile Selector Toggles\fR).)
.PP
The file-reading code uses the format's `magic number' to determine file
type --- e.g. a JPEG/JFIF file starts with the (hex) bytes `\fBFF D8\fR'.
So if you start zgv with \fIzgv foo\fR, and foo is in a format
supported by zgv (such as JPEG), the format will be figured out and the
file loaded even though the `extension' is absent.
.PP
.SH "SUPPORTED FILE FORMATS"
zgv supports the following file formats:
.PP
\fBo\fR 
GIF. Multiple-image GIFs are treated specially (see \fBMultiple-image
GIF Animation\fR).
.PP
\fBo\fR 
JPEG.
.PP
\fBo\fR 
PNG.
.PP
\fBo\fR 
PBM/PGM/PPM, collectively known as `PNM'. This is a nice simple format
used by pbmplus and netpbm.
.PP
\fBo\fR 
BMP.
.PP
\fBo\fR 
TGA (Targa).
.PP
\fBo\fR 
PCX.
.PP
\fBo\fR 
mrf. Mrf files can be converted to/from PBM with mrftopbm/pbmtomrf, and
the format is documented in the \fImrf(5)\fR man page.
.PP
\fBo\fR 
PRF. PRF is an extension of mrf, similarly converted with
prftopnm/pnmtoprf, and documented in the \fIprf(5)\fR man page.
.PP
\fBo\fR 
XBM (X bitmap files).
.PP
\fBo\fR 
XPM. zgv reads the file \fI/usr/X11R6/lib/X11/rgb.txt\fR to look up X
colour names. (The location of the file is a compile-time option; you
can edit \fIconfig.mk\fR to change it.)
.PP
\fBo\fR 
TIFF.
.PP
\fBo\fR 
Photo-CD. This is only supported if `\fBPCD_SUPPORT\fR' was defined at
compile-time; by default, PCD support is omitted. PCD files contain
multiple image resolutions --- to choose which to view, use `\fBAlt-1\fR'
(lowest) to `\fBAlt-5\fR' (highest) in the viewer.
.PP
\fBo\fR 
Xv format thumbnail files. Normally you won't want to view these other
than in the file selector, but zgv lets you view them as normal picture
files if you want. Note that in the file selector, thumbnail files are
indistinguishable from the files they represent (other than the
.cc @
\fI.xvpics\fR in the directory's filename) --- they have the same
@cc .
filenames, and thumbnails are their own thumbnails. :-)
.PP
.RE
.PP
.SH "FILE FORMAT DEPTHS"
No matter what bit depth a file format uses, zgv reads files in as one
of two internal formats --- 8-bit (with a palette), or 24-bit.
(See \fBVideo Mode Issues\fR, for why zgv works this way. See \fBWhat a
Video Mode is\fR, for more on bit depth.) Usually, zgv works internally
with the lowest bit depth which doesn't lose data. So a 1-bit-per-pixel
(mono) file is loaded as 8-bit, as are 4-bit and 8-bit ones, but a
24-bit file is loaded as 24-bit.
.PP
For the most part, it's obvious which depth zgv reads a file as, if you
know how the files are stored. But if you don't happen to know that,
then it can seem like some bizarre black art dependent on the phase of
the moon. So here's how the differing file formats are read:
.PP
Always 8-bit:
.RS
GIF, PBM, PGM, mrf, XBM.
.PP
.RE
Always 24-bit:
.RS
PPM, TIFF.
.PP
.RE
24-bit if file is, else 8-bit:
.RS
JPEG, PNG, BMP, TGA, PCX, XPM, PRF.
.PP
.RE
.PP
XPM is really a special case, being a palette-based format which can
handle an arbitrary number of colours. (This means XPMs don't have any
inherent `depth' as such, unlike most other files --- you couldn't
legitimately talk of a `24-bit XPM file'.) XPMs are loaded as 8-bit if
they have 256 colours or less, otherwise they're loaded as 24-bit.
.PP
Another special feature of XPM is that, since XPM files are primarily
used as icons, they are often partly transparent, and usually not
designed to be viewed on a black background. For this reason,
transparent pixels are shown as grey, and if the XPM contains less
than 256 colours, the screen's background colour is made grey as well.
.PP
.SH "CONSOLES"
zgv tries to deal sensibly with Linux and FreeBSD's provision for
multiple `virtual consoles'. This section covers the details of this.
.PP
.SH "RUNNING IN THE BACKGROUND"
Normally when you do a console switch away from zgv, it is suspended ---
nothing at all happens in that zgv process (and it takes no CPU) until
you switch back to it.
.PP
However, there are two circumstances (both in the file selector) when it
makes sense for zgv to keep running `in the background', and in these
cases it does keep running:
.PP
\fB-\fR 
When updating thumbnails. See \fBUpdating Thumbnails\fR, for what happens
in this case.
.PP
\fB-\fR 
When reading a picture file. If it finishes reading it before you
return, zgv is suspended as usual.
.RE
.PP
.SH "RUNNING FROM NON-CONSOLES"
If it's not run from a console tty (and if you are the owner of the
currently-selected console), zgv will attempt to run on the first
available console --- if there are none free, it will exit with an error
message. When it has to switch consoles like this, exiting zgv will
cause an automatic return to whichever console was current when the
program was started. This means you can run zgv reasonably transparently
from X, Emacs, etc.
.PP
One problem with this is that, since zgv uses `\fBfork()\fR', `\fBzgv
-h\fR' and other things which give output on stdout will give confusing
results; the original zgv process will have exited before the new
(replacement) zgv process exits. Redirect stdout if you want things to
make a bit more sense --- for example, `\fBzgv -h | less\fR' will do what
you'd expect. For more `normal' uses where zgv doesn't give any output,
there's no problem.
.PP
However, there's a problem running zgv from X, when it's invoked from a
window manager's menu. (It works ok from an xterm.) The problem is that
the window manager runs the program with its stderr attached to the tty
that the X server was started from. So zgv will run on the console you
started X from, but won't switch there. As luck would have it, there's
an easy workaround; when invoking zgv from the menu, just redirect
stderr to a non-console, such as \fI/dev/null\fR. The details of how to
arrange this vary depending on the window manager you're using, but
generally you'd want a line ending in something like `\fBExec zgv
2>/dev/null &\fR' to do this.
.PP
It may seem a bit odd running zgv from X, but it can be useful if you
have a 15/16/24/32-bit card and normally run X in monochrome or 8-bit
colour. Or if you just happen to like zgv. :-)
.PP
Running zgv from an xterm with a filename as an argument is probably how
you'd usually do this, though --- e.g. `\fBzgv wibble.jpg\fR'. zgv then
runs on a free console and switches back when you exit. If you want to
switch back to X before exiting zgv, it's just a matter of switching
consoles, as usual. X will be running on what was the first free console
when it started; often this is number 7.
.PP
.SH "USING A MOUSE"
When mouse support is enabled in zgv, you can do almost everything with
it that you would ordinarily do with the keyboard.
.PP
.SH "ENABLING THE MOUSE"
To use the mouse support for just one zgv session, start zgv with
something like `\fBzgv -M\fR'. To enable it by default, add \fImouse
on\fR to a config file (see \fBConfig Files\fR).
.PP
zgv uses svgalib's mouse configuration; if you have not set that up, you
will probably need to do so before zgv's mouse support will work. See
the \fIlibvga.config(5)\fR man page for details.
.PP
If you find that the mouse pointer moves too quickly or too slowly, you
should change zgv's \fImouse-scale\fR setting (see \fBConfig
Variables\fR).
.PP
.SH "MOUSE MENUS"
The file selector and viewer use the mouse differently for the most
part, but they do have one feature in common --- clicking the right
mouse button brings up a menu. (This is called, not unreasonably, the
`right-button menu'.)
.PP
All the menu items correspond directly to commands available from the
keyboard. So if you are not very familiar with zgv, it may be best to
read all about those before making extensive use of the menu. See \fBThe
File Selector\fR, for file selector commands. See \fBThe Viewer\fR, for
viewer commands.
.PP
Some commands are `greyed out' on the menu if they are unavailable. For
example, if you are viewing an 8-bit picture in the viewer, the
15/16/24-bit modes listed on the menu will be greyed out.
.PP
To remove the menu from the screen without selecting a command, either
click somewhere on the screen not covered by the menu, or press
`\fBEsc\fR'.
.PP
.SH "MOUSE FUNCS IN THE FILE SELECTOR"
In the file selector, the mouse controls a conventional mouse pointer.
In addition to the right button calling up a menu, there are these
actions you can take with the mouse:
.PP
\fBo\fR 
Clicking on a file views it.
 
.PP
\fBo\fR 
Clicking on the area which shows the current directory prompts you for a
directory to change to (see \fBDialog Boxes\fR).
.PP
\fBo\fR 
The scrollbar can be used to move along the file list, in a few
different ways:
.PP
\fB-\fR 
Clicking on the scrollbar's arrows moves along the file list a column at
a time.
.PP
\fB-\fR 
Clicking on either side of the scrollbar's `slider' (only possible if
the slider does not fill the scrollbar, i.e. only possible if there are
more files than are shown onscreen) moves along the dir a page at a
time.
.PP
\fB-\fR 
Clicking on the slider and dragging it moves the file cursor along the
directory. It works in a slightly unusual way --- if you bear in mind
that the slider represents the screen `sliding' along the directory
listing, and remember that you're moving the \fIcursor\fR not the
screen itself (at least not directly), the way it works may make a bit
more sense.
.RE
.RE
.PP
Once you've got used to this, and got used to the menu, you may wonder
how exactly you're meant to (say) delete a file with the mouse. After
all, while clicking on it does select it, it also views it! Well, there
is a way, described below.
.PP
Click on the file you want to select, but hold down the mouse button.
While holding the button, click the right button. The menu should
appear, and you can let both buttons go. You can then select whatever
you want to do from the menu.
.PP
.SH "MOUSE FUNCS IN THE VIEWER"
In the viewer, the mouse is mainly used for moving around the picture.
To use it for this, you should hold down the left button and drag the
mouse around. It's a little difficult to explain, but the basic idea is
that you drag the screen around the picture --- experiment with it and
you should get the idea. No mouse pointer appears while doing this,
which is a feature not a bug. :-)
.PP
(If redisplay of the picture takes a long time, zgv can lag behind your
mouse movements somewhat. Hopefully this shouldn't be too much of a
problem.)
.PP
There is also a right-button menu much like the file selector's one, and
a mouse pointer does appear when using that. Some notes on the menu:
.PP
\fBo\fR 
Only a fixed selection of possible video modes are given as options on
the menu, to keep things manageable. The others are only available using
the relevant keys. (See \fBSelecting a Video Mode\fR.)
.PP
\fBo\fR 
The \fI...smooth on/off\fR entries on the menu refer to the
\fIvkludge\fR and `interpolation in scaling mode' settings
respectively, as should hopefully be clear from the context.
.PP
\fBo\fR 
When using an 8-bit mode for the viewer, the right-button menu has to
allocate some colours for its display from those normally used to show
the picture. This means that the picture might look a little odd when
the menu is onscreen in 8-bit modes. (zgv does try to minimise the
disturbance by using the closest available colours, though.)
.PP
\fBo\fR 
The viewer's menu is disabled in modes which are less than 480 pixels
high, since that's the minimum screen height required to display it.
(This explains a number of the modes omitted from the menu. If (say)
320x200x8 was on there, you'd then be able to switch to the mode using
the mouse (of course), but once there you wouldn't be able to use the
mouse for anything other than moving around the picture!)
.RE
.PP
Finally, while viewing an animated GIF file (see \fBMultiple-image GIF
Animation\fR), you can right-click to exit the animation, or left-click to
pause/unpause.
.PP
.SH "MOUSE DEFICIENCIES"
You can do most things in zgv with the mouse, but you can't do
everything. The main problem is that there are still a few things which
effectively ignore the mouse:
.PP
\fBo\fR 
When thumbnails are being updated, or a picture being read, there's no
mouse equivalent of `\fBEsc\fR'.
.PP
\fBo\fR 
When you're prompted for a directory name, there's no mouse equivalent
of `\fBEsc\fR' or `\fBEnter\fR'.
.RE
.PP
.SH "CONFIGURING ZGV"
Many aspects of the way zgv works can be modified by using a
configuration file.
.PP
.SH "CONFIG FILES"
A configuration file lets you alter aspects of zgv's behaviour. zgv
supports two possible config files --- a system-wide one,
\fI/usr/local/etc/zgv.conf\fR; and one for each user in their home
directory, \fI$HOME/.zgvrc\fR. Both are optional. If
\fI$HOME/.zgvrc\fR exists, it is used \fIinstead of\fR
\fI/usr/local/etc/zgv.conf\fR.
.PP
Before describing the format of config files, it may help to give an
example file:
.PP
# Sample zgv config file
.br
# Comment lines begin with `#' and are ignored,
.br
#  as are blank lines.
.br
.PP
slideshow-randomise on
.br
# do faster jpeg thumbnails
.br
jpeg-index-style 1
.br
# make tagged files' filenames blue
.br
col-tagged 0 0 63
.br
.PP
It is a line-based format. Each line (or rather, each line which is not
a comment line and is not blank) assigns a value to a single predefined
`variable'. zgv has many such variables it lets you modify in this way.
For example, the \fIslideshow-randomise\fR option above controls
whether or not zgv shuffles the file order in slideshows. If it is given
the value `on', `yes', or `1' it does; if `off', `no', or `0' it
doesn't.
.PP
Most variables are of this yes-or-no `boolean' type. Some others like
\fIjpeg-index-style\fR are integers (whole numbers). And there are
other types, too.
.PP
Since the variables set in a config file have a direct effect on how zgv
works, it can be easier to simply call them `settings'. Indeed, such
terminology is used on occasion in this documentation.
.PP
.SH "CONFIG VARIABLE TYPES"
There are various types of variable:
.PP
\fB-\fR 
Boolean. These are on-or-off, yes-or-no variables. Most of zgv's config
file variables are of this type. Use `on', `yes', or `1' to enable the
setting, and `off', `no', or `0' to disable.
.PP
\fB-\fR 
Integer. These are whole numbers. The meaning of the number depends on
what the variable is used for.
.PP
\fB-\fR 
Real (floating-point). This can be a whole number or a decimal fraction.
Only the \fIcontrast\fR and \fIgamma\fR variables are of this type.
.PP
\fB-\fR 
RGB. This is a special type used for specifying colours. It consists of
three numbers given one after the other, in the order red, green, blue.
Each must be in the range 0 to 63 inclusive. Together these specify the
colour --- for example, \fI63 63 63\fR is white, \fI32 32 32\fR a
medium grey, and \fI63 63 0\fR is yellow.
.PP
\fB-\fR 
Video mode (also called just `mode'). This is also a special type, used
for specifying a mode. It uses the \fIwidth\fRx\fIheight\fRx\fIdepth\fR
notation mentioned elsewhere (see \fBWhat a Video Mode is\fR), but with
spaces and/or tabs as separators, so you're actually giving three
separate numbers. For example, \fI640 480 8\fR specifies a 640x480x8
(256-colour) mode.
.PP
\fB-\fR 
The `no args' type. Settings of this form aren't variables as such, but
commands. See \fBConfig Variables\fR, for details of these
(\fImode-all-bad\fR and \fImode-all-good\fR).
.PP
.RE
.PP
.SH "CONFIG VARIABLES"
Most configuration variables are directly equivalent to the long option
names, and documented elsewhere (see \fBOptions\fR). For example,
where you'd do \fI--zoom\fR on the command-line, you'd do \fIzoom
on\fR in a config file. Be careful to avoid quoting arguments; if you do
this in a config file, you'll get an error. So \fI--viewer-start-mode
"800 600 8"\fR on the command-line becomes \fIviewer-start-mode 800 600
8\fR in a config file.
.PP
Now, let's go back to that "most". The options which can \fIonly\fR be
specified on the command-line are the following, `one-off' options:
.PP
\fBo\fR 
\fI--help\fR
.PP
\fBo\fR 
\fI--version\fR
.PP
\fBo\fR 
\fI--reload-delay\fR
.PP
\fBo\fR 
\fI--show-tagged\fR
.PP
\fBo\fR 
\fI--show-dimensions\fR
.PP
\fBo\fR 
\fI--write-ppm\fR
.RE
.PP
Equally, there are some configuration variables which can only be
modified in a config file. Here they are:
.PP
\fImode-all-bad\fR
.RS
(No args; this is a command, not a variable as such.) Stops zgv
from allowing \fIany\fR video modes. This is usually followed by some
\fImode-good\fR assignments. If it isn't, zgv simply assumes the
320x200x8 mode can be used.
.PP
.RE
\fImode-all-good\fR
.RS
(No args; this is a command, not a variable as such.) This instructs zgv
to assume that all modes can be used, providing your video card has
them. This is how zgv usually acts.
.PP
.RE
\fImode-bad \fImodespec\fR\fR
.RS
Mark the specified mode as `bad', so zgv will not allow it. The
`modespec' should be the width, height, and depth separated by spaces,
e.g. `\fB640 480 8\fR'.
.PP
.RE
\fImode-good \fImodespec\fR\fR
.RS
Mark the specified mode as `good', so zgv will allow it.
.PP
.RE
\fImouse-kludge\fR
.RS
(Enabled by default.) If enabled, throws away any byte which appears
from the mouse device in the first 50ms. This is to work around a
problem with my `mouse' (a Logitech trackball) which sends a bogus
`\fBM\fR' byte on initialisation for no obvious reason --- yet input is
meant to be in packets of 3 bytes! Anyway, this fixes it, and shouldn't
break any other mice, but if you have inexplicable mouse problems you
may want to try disabling this just to make \fIsure\fR it's not the
problem.
.PP
.RE
.PP
.SH "CONFIG FILE BACKWARD COMPATIBILITY"
Many of the config variable names were changed (in an attempt to
rationalise them to some extent, and behave a bit more like xzgv) in zgv
5.5, when GNU-style long command-line options were added. However, being
fully aware of the number of complaints I would get if I made a clean
break with the past ;-), almost all the old config file variable names
are still supported (though not on the command-line).
.PP
Rather than document the options again, here's a simple list of which
old options map to which current ones. (See \fBOptions\fR, for
documentation on most. See \fBConfig Variables\fR, for a few others.)
.PP
\fIallmodesbad\fR
.RS
= \fImode-all-bad\fR
.PP
.RE
\fIallmodesgood\fR
.RS
= \fImode-all-good\fR
.PP
.RE
\fIautomodefit\fR
.RS
= \fIauto-mode-fit\fR
.PP
.RE
\fIbadmode\fR
.RS
= \fImode-bad\fR
.PP
.RE
\fIbc_order_rev\fR
.RS
= \fIreverse-bc-order\fR
.PP
.RE
\fIbetterpgm\fR
.RS
= \fIpgm-truecol\fR
.PP
.RE
\fIblack\fR
.RS
= \fIcol-black\fR
.PP
.RE
\fIblockcursor\fR
.RS
= \fIblock-cursor\fR
.PP
.RE
\fIcleartext\fR
.RS
= \fIclear-screen-on-exit\fR
.PP
.RE
\fIdark\fR
.RS
= \fIcol-dark\fR
.PP
.RE
\fIfakecols\fR
.RS
= \fIfake-cols\fR
.PP
.RE
\fIfastdither16col\fR
.RS
= \fIdither-16col-fast\fR
.PP
.RE
\fIforce16fs\fR
.RS
= \fIforce-fs-16col\fR
.PP
.RE
\fIforgetoldpos\fR
.RS
= \fIfs-ignore-old-pos\fR
.PP
.RE
\fIfs16col\fR
.RS
= \fIfs-16col-colour-thumbnails\fR
.PP
.RE
\fIfs_startmode\fR
.RS
= \fIfs-start-mode\fR
.PP
.RE
\fIfsmagic\fR
.RS
= \fIfs-magic\fR
.PP
.RE
\fIgoodmode\fR
.RS
= \fImode-good\fR
.PP
.RE
\fIgnulitically_correct\fR
.RS
= \fIgnulitically-correct\fR
.PP
.RE
\fIjpeg24bit\fR
.RS
= \fIforce-viewer-8bit\fR (sense inverted)
.PP
.RE
\fIjpegindexstyle\fR
.RS
= \fIjpeg-index-style\fR
.PP
.RE
\fIjpegspeed\fR
.RS
= \fIjpeg-speed\fR
.PP
.RE
\fIlight\fR
.RS
= \fIcol-light\fR
.PP
.RE
\fIlinetext\fR
.RS
= \fIline-text\fR
.PP
.RE
\fImedium\fR
.RS
= \fIcol-medium\fR
.PP
.RE
\fImousekludge\fR
.RS
= \fImouse-kludge\fR
.PP
.RE
\fImousescale\fR
.RS
= \fImouse-scale\fR
.PP
.RE
\fInodelprompt\fR
.RS
= \fIdelete-single-prompt\fR (sense inverted)
.PP
.RE
\fIonefile_progress\fR
.RS
= \fIavoid-single-progress\fR (sense inverted)
.PP
.RE
\fIpcdres\fR
.RS
= \fIpcd-res\fR
.PP
.RE
\fIperfectindex\fR
.RS
= \fIfs-perfect-cols\fR
.PP
.RE
\fIrevert\fR
.RS
= \fIrevert-scale\fR
.PP
.RE
\fIrevert_orient\fR
.RS
= \fIrevert-orient\fR
.PP
.RE
\fIshowxvpicdir\fR
.RS
= \fIshow-xvpics-dir\fR
.PP
.RE
\fIshuffleslideshow\fR
.RS
= \fIslideshow-randomise\fR
.PP
.RE
\fIslowupdate\fR
.RS
= \fIfs-slow-thumbnail-update\fR
.PP
.RE
\fIsmallfstext\fR
.RS
= \fIfs-small-text\fR
.PP
.RE
\fIstartmode\fR
.RS
= \fIviewer-start-mode\fR
.PP
.RE
\fItagged\fR
.RS
= \fIcol-tagged\fR
.PP
.RE
\fItagtimeout\fR
.RS
= \fIslideshow-delay\fR
.PP
.RE
\fIthicktext\fR
.RS
= \fIfs-thick-text\fR
.PP
.RE
\fIviewer16col\fR
.RS
= \fIviewer-16col-colour\fR
.PP
.RE
\fIxzgvkeys\fR
.RS
= \fIxzgv-keys\fR
.PP
.RE
\fIzoom_reduce_only\fR
.RS
= \fIzoom-reduce-only\fR
.PP
.RE
.PP
The old \fIfullsel\fR, \fIhicolmodes\fR, and \fIhicontrol\fR options
are no longer supported (i.e. zgv's previously-default behaviour for
those is now permanent), and have no effect other than to give a
warning.
.PP
.SH "RATIONALE"
Here I (RJM) attempt to explain why I did things the way I did. This is
presented in a question-and-answer format of sorts.
.PP
.SH "WHY YET ANOTHER VIEWER?"
Often the simple answer to this is ``Actually, zgv was here first ---
ask the other guy.'' This is true of any viewer written since 1993,
anyway.
.PP
Most of the time though, this is phrased as ``Why not just use xv?''.
That's a fair point; xv is quite a good program, and it has some nice
features. But briefly, here are my problems with it, the areas where I
personally feel zgv is (at least arguably) better than xv:
.PP
\fBo\fR 
xv is shareware. Personally, I don't think selling picture viewers is
all that sensible when things like the Gimp are free.
.PP
\fBo\fR 
I find the interface really, really weird. In particular, the visual
schnauzer feels rather `bolted on'.
.PP
\fBo\fR 
xv tries to be a Swiss-Army knife of graphics, rather than concentrating
on what it really is, a picture viewer. zgv has some problems in this
area too, but it's much closer to the `do one thing well' software tools
philosophy (see \fBOpening the software toolbox\fR in the \fItextutils\fR info file).
.PP
.RE
.PP
I'm not saying zgv is great and xv is terrible, and it's clear that many
people prefer using (or have to use) an X picture viewer --- an area
where xv has no obvious zgv-like competition (er, not any more; see
below). But I don't think xv is even remotely close to being the
category-killer for picture viewing that some people seem to think it
is.
.PP
(Update: Since I originally wrote the ``no obvious zgv-like
competition'' line above, I've written xzgv, which is a GTK+/Imlib-based
port/rewrite of zgv for X. What can I say, I liked it so much I wrote
the code. :^)
.PP
`Electric Eyes' is another alternative to xv, but personally I find that
much too xv-like (hence my work on xzgv).)
.PP
.SH "WHY A TEXINFO MANUAL?"
For years, I maintained a conventional `man page' for zgv. But over
time, I realised just how impossibly confusing the zgv man page had
become.
.PP
So I wanted to rewrite zgv's documentation in a more sensible way, in
some other format than a man page. I wanted an established,
well-supported format with structure and cross-referencing. I felt this
made it a choice between HTML and texinfo. HTML seemed to me to be a
moving target like no other, and not as well supported on text-only
terminals as Info (and thus texinfo). When I noticed that a converter
existed to convert texinfo to HTML in any case, the case was closed.
.PP
Don't get me wrong --- I like man pages. And even with the excellent
Texinfo documentation and Emacs' very helpful Texinfo mode, writing
texinfo is hardly easy. (Without Texinfo mode's node- and menu-update
commands, I personally would find it near-impossible!) But big man pages
just aren't that good for reference, and this is made worse by the
relative lack of structure.
.PP
.SH "WHY ONE-SPACE SENTENCE ENDS?"
The conventional way to write texinfo is to follow each sentence with
two spaces after the dot (or whatever ends the sentence). Many people
normally write this way in a non-texinfo context too. But a sizeable
proportion of people normally write text with only one space after the
dot --- and I'm one of them.
.PP
The Texinfo documentation gives the impression that two-space
\fImust\fR be used; it says ``it is important to put two spaces at the
end of sentences in Texinfo documents.'' But the only circumstance in
which spacing from the texinfo file is preserved at all (in any sense
other than `there is a space here') is when the texinfo is converted to
Info format. So, in fact, the decision to use two-space depends on how
the author wants Info output to appear --- this is a subjective decision
which should be \fIentirely down to the preference of the author\fR,
despite the Texinfo documentation's attempt to make two-space sound like
an objective you-must-do-this kind of thing.
.PP
You might wonder what the problem with using one-space is, then. Well,
`makeinfo' has to reformat paragraphs, and whenever it needs to insert
space at (what appears to it to be) the end of a sentence, it inserts
two spaces. This behaviour cannot be altered, unlike in Emacs
(\fIsentence-end-double-space\fR; see \fBFill Commands\fR in the \fIemacs\fR info file) and GNU fmt (\fI-u\fR; see \fBfmt
invocation\fR in the \fItextutils\fR info file). Also, attempting to `fix'
the output Info with sed doesn't work properly because the `tags' used
to find nodes quickly are then incorrect. These could of course also be
fixed, but this would involve a lot more work than a simple sed
invocation.
.PP
So realistically, anyone who writes texinfo with one-space has to put up
with the occasional two-space sentence end being inserted into their
text --- worse still, the current `makeinfo' formatting algorithm seems
to insert two spaces even after abbreviations (such as `e.g.' and
`etc.'), which breaks even two-space texinfo. (This is particularly
ironic, by the way, since two-space partisans' main argument in favour
of the practice is the way it makes it possible to tell the difference
between abbreviations and the end of a sentence.)
.PP
One last point may be worth noting; I am not the first person to write
texinfo files using one-space. At the time of writing, it is used in the
texinfo documentation for BFD, gdbm, GTK, IPC, ld.so, and viper, and I
expect there are instances I'm not aware of.
.PP
.SH "BUGS AND RESTRICTIONS"
All (non-trivial) programs have bugs. Anyone who denies this...
.PP
\fB-\fR 
clearly hasn't written too many programs.
.PP
\fB-\fR 
is wrong. ;-)
.RE
.PP
It follows that zgv, like everything else, always has some bugs. Usually
these are not serious, or I'd have fixed them before releasing zgv.
Either way, bugs and other problems with zgv are noted here.
.PP
.SH "KNOWN BUGS"
\fB-\fR 
If an XPM file using a chars-per-pixel setting of two or less uses an
undefined colour code in the image, this is not reported, and such
pixels are shown as the background colour. (But then, reading XPMs in
the three-chars-or-more manner, which \fIdoes\fR detect undefined
colours, would make it (at best) half as fast.)
.PP
\fB-\fR 
If you have both slideshow looping and shuffling enabled, sometimes you
can get the same picture twice in a row. This is due to the last picture
chosen for one loop round the pictures being the same as the first of
the next loop.
.PP
\fB-\fR 
If a GIF file is corrupted in such a way that the decompressed image
has a larger number of pixels in it, the extra pixels will be ignored
and no error or warning will be generated.
.PP
\fB-\fR 
Renaming a file renames the thumbnail too, but currently it ignores any
\fI~/.xvpics/_foo_bar/baz\fR thumbnail.
.PP
\fB-\fR 
If you use the old line-based text, or use the `fs-thick-text' option,
some of the text in the right-button menus slightly overruns the
`buttons' they're on, which is harmless but doesn't look very nice.
.PP
\fB-\fR 
If you look up `joe code' in a dictionary, it says ``see zgv''. :-)
.PP
.RE
.PP
.SH "SUBOPTIMAL FEATURES"
\fB-\fR 
You don't currently get a progress report when TIFFs are being read.
.PP
\fB-\fR 
Some of the things the change-picture viewer keys do when viewing a
slideshow are pretty stupid (`\fB^P\fR' and `\fB^N\fR' suck, for example).
.PP
\fB-\fR 
For multiple-image GIFs, the progress indicator only indicates how much
of the current image has been read, rather than how much of the file as
a whole has been. There's some precedent for this approach (e.g. the
Gimp), but it's not terribly elegant.
.PP
\fB-\fR 
Corrupt JPEG or PNG data warnings are not reported by zgv.
.PP
\fB-\fR 
In the 640x480x4 mode in the viewer, when scaling a picture where the
scaled picture remains narrower than the screen's width, the background
to the left and right of the picture is filled in with the picture's
background colour (though you'll only be able to see this if the
picture's background colour isn't black). This is harmless but looks
strange.
.PP
\fB-\fR 
The help pages only list a few of the keys.
.PP
.RE
.PP
.SH "RESTRICTIONS"
\fB-\fR 
Most GIF89a extension blocks are ignored. (The exception is the Graphics
Control Block, used for delay times and transparency in animated GIFs.)
.PP
\fB-\fR 
XPM files with more than 256 colours are shown with a black background
(not the grey background usually used for XPMs), and those with exactly
256 colours are shown with the background being the first colour
specified in the file.
.PP
.RE
.PP
.SH "REPORTING BUGS"
If you find zgv does something wrong, which you suspect might be a fault
of some sort (a bug) in the program, it is best to report it as I may
not be aware of the problem. (But first, check it is not a `known bug'.
See \fBKnown Bugs\fR. It is not usually helpful to report a bug I already
know about.)
.PP
zgv uses various libraries; if you find a problem, it \fIcould\fR be a
bug in one of them. This is not an attempt at buck-passing :-), rather
concern that bugs should be reported to the people best able to fix
them.
.PP
Most bugs will turn out to be in zgv itself, but in the past,
\fIsome\fR display bugs have turned out to be bugs in svgalib. If it is
a display bug, try zgv on other machines if you can, and try other
svgalib programs which use the same video mode(s). (Svgalib's example
program `vgatest' can be useful for this; see its man page for details.)
This should help you determine whether it is an svgalib bug or not. (If
you really can't figure out whether it's a bug in zgv or in svgalib, it
may be best to report it as a possible bug in both.)
.PP
It is important to include as much detail in a bug report as you can.
Here are some details you should include:
.PP
\fBo\fR 
The version of zgv you are running (`\fBzgv --version\fR' reports this).
.PP
\fBo\fR 
The version of svgalib (try `\fBls /usr/lib/libvga.*\fR' for this).
.PP
\fBo\fR 
What your machine's (S)VGA card is described as, and (generally more
useful) what svgalib reports it to be. zgv suppresses this report, but
most other svgalib programs (`vgatest' which comes with svgalib being
a simple example) will report it when they start up.
.PP
\fBo\fR 
A description of the bug --- what effects it has, the circumstances it
occurs in, and so on. Does it only happen for certain types of file?
Only when in 8-bit modes? Only when \fIavoid-single-progress\fR is
enabled? Even `irrelevant' details can sometimes be useful.
.PP
\fBo\fR 
Finally, if you are a programmer and believe you have managed to fix the
bug yourself, patches are gratefully accepted. :-) You should generate
the patch using `\fBdiff -c\fR' or (preferably) `\fBdiff -u\fR'.
.PP
.RE
.PP
So, if you think you've found a bug in zgv, report it by emailing me
at <rus@svgalib.org>.
.PP
.SH "REPORTING DOCUMENTATION BUGS"
Bugs in the documentation can sometimes cause as much trouble as bugs in
the program; if you notice a problem in the documentation, it's a good
idea to report it.
.PP
For reports of documentation bugs, you should include these details:
.PP
\fBo\fR 
The version of zgv the documentation is for.
.PP
\fBo\fR 
If it is a problem in one specific section of the documentation, specify
which part it is (by this I mean the heading it comes under;
texinfophiles should read this as `the node name' :-)).
.PP
\fBo\fR 
The format of the documentation you saw the problem in (e.g. info, man
page, HTML).
.PP
\fBo\fR 
A description of the problem.
.PP
.RE
.PP
.SH "FUTURE CHANGES"
See \fBReporting Bugs\fR, for details of where to send the bug report.
I have given up on the apparently naive notion that zgv will ever be
`finished'. Every time I think that, some other idea for a new feature
pops into my head (or is forced there by someone else).
.PP
If you want to suggest a feature you'd like in zgv, or a change to an
existing feature, contact me at <rus@svgalib.org>.
.PP
Here is a list of features and/or changes which may hopefully be
implemented in future, in approximate priority order. (This is updated
less often than zgv's \fITODO\fR file, so you should check that too if
you're interested in this stuff.)
.PP
\fBo\fR 
Fix the progress indicator problem with multiple-image GIFs.
.PP
\fBo\fR 
Mouse support isn't really finished --- the goto-dir dialog should have
ok/cancel buttons, and currently you can't interrupt file loading and
thumbnail updates. The latter two would need a custom mouse event
handler temporarily installed, so that we could avoid losing any clicks.
Actually it might not be too bad an idea to always use a custom handler;
that would be easier. After all, on a slow machine you can already lose
clicks during a file-selector screen redraw!
.PP
\fBo\fR 
File move should probably delete any existing thumbnail for the file
if the file itself is moved successfully.
.PP
.RE
.PP
.SH AUTHOR
Russell Marks <rus@svgalib.org> and others;
see the section \fBACKNOWLEDGEMENTS\fR for details.
.PP
.SH "SEE ALSO"
.BR xzgv "(1),"
.BR cjpeg "(1), " djpeg "(1),"
.BR pbm "(5), " pgm "(5), " ppm "(5),"
.BR mrf "(5),"
.BR svgalib "(7), " libvga.config "(5)"
